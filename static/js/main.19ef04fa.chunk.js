(this["webpackJsonpgeo-shapes"]=this["webpackJsonpgeo-shapes"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){},367:function(e,t,n){},369:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),o=n.n(r),i=n(30),s=n.n(i),l=n(4),u=n(6),d=n.n(u),j=n(26),b=n(8),p=n(3),f="https://Jozefpodlecki.github.io/geo-shapes",O=n(54),v=n.n(O),m=fetch("".concat(f,"/assets/geoObjects.json")).then((function(e){return e.json()})),g=fetch("".concat(f,"/assets/neighbours.json")).then((function(e){return e.json()})),h=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return"search"in e&&e.search.toLowerCase().includes(t.phrase)})).slice(0,t.pageSize));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return fetch("".concat(f,"/assets/regions/").concat(e,".json")).then((function(e){return e.json()}))},_=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageSize,a=t.phrase,e.next=3,m;case 3:return c=e.sent,r=c.filter((function(e){return"country"===e.type&&e.search.toLowerCase().includes(a)})),e.abrupt("return",r.slice(0,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageSize,a=t.phrase,e.next=3,m;case 3:return c=e.sent,r=c.filter((function(e){return"capital"in e&&e.search.toLowerCase().includes(a)})),e.abrupt("return",r.slice(0,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return n=e.sent,a=n.filter((function(e){return"country"===e.type})),e.abrupt("return",a.find((function(e){return e.iso3166a2.includes(t)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return fetch("".concat(f,"/assets/shapes/").concat(e,"/first-level.svg")).then((function(e){return e.text()}))},k=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,fetch("".concat(f,"/assets/geojson/countries.geojson")).then((function(e){return e.json()}));case 3:c=e.sent,a=new v.a(c);case 5:if(!(r=a.search(t,n))){e.next=8;break}return e.abrupt("return",r.properties.ISO_A3.toLowerCase());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=5;break}return e.next=3,fetch("".concat(f,"/assets/geojson/continents.geojson")).then((function(e){return e.json()}));case 3:a=e.sent,c=new v.a(a);case 5:if(!(r=c.search(t,n))){e.next=8;break}return e.abrupt("return",r.properties.continent.toLowerCase());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g;case 2:return n=e.sent,a=n.find((function(e){return e.iso3166a2===t})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return n=e.sent,a=n.filter((function(e){return"country"===e.type})),c=a.find((function(e){return e.iso3166a3===t})),e.abrupt("return",fetch("".concat(f,"/assets/geojson/").concat(null===c||void 0===c?void 0:c.iso3166a2,".geojson")).then((function(e){return e.json()})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(f,"/assets/geojson/").concat(t,".geojson")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/assets/geojson/").concat(t,".geojson")).then((function(e){return e.json()}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T=n(372),P=n(376),D=n(373),A=n(374),B=n(375),H=n(371),I=n(17),z=n(41),F=n.n(z),Y=(n(90),n(1)),R=function(e){var t=e.onMouseEnter,n=e.onMouseLeave,a=e.onMouseMove,c=e.svg,o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=o.current;if(e){var c=e.firstChild;if(c instanceof SVGElement){var r=c.querySelector("g").getBoundingClientRect();r.y,r.width,r.height;return c.addEventListener("mousemove",a),c.addEventListener("mouseenter",t),c.addEventListener("mouseleave",n),function(){c.removeEventListener("mousemove",a),c.addEventListener("mouseenter",t),c.addEventListener("mouseleave",n)}}}}),[t,n,a,o]),Object(Y.jsx)("div",{className:"country-page__svg",ref:o,dangerouslySetInnerHTML:{__html:c}})},J=Object(r.memo)(R),U=n(7),G=n(9),W=n(71),Z=n(37),q=n.n(Z),V=n(46),X=6378137,K=Math.PI/180,Q=180/Math.PI;function $(e){return e*K}function ee(e){return e*Q}function te(e,t,n,a){var c=$(e[1]),r=$(e[0]),o=t/n,i=Math.cos(o),s=Math.cos(c),l=Math.sin(o),u=Math.sin(c),d=Math.asin(u*i+s*l*Math.cos(a));return[ee(r+Math.atan2(Math.sin(a)*l*s,i-u*Math.sin(d))),ee(d)]}function ne(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}function ae(e){return null===e||void 0===e}function ce(e,t,n){for(var a=function(e){if(ae(e))return 64;if(ne(e)){var t=e.numberOfEdges;return void 0===t?64:t}return 64}(n),c=function(e){if(ae(e))return X;if(ne(e)){var t=e.earthRadius;return void 0===t?X:t}return X}(n),r=function(e){if(ae(e))return 0;if(ne(e)){var t=e.bearing;return void 0===t?0:t}return 0}(n),o=function(e){return ne(e)&&e.rightHandRule?-1:1}(n),i=$(r),s=new Array,l=0;l<a;++l){var u=te(e,t,c,i+2*o*Math.PI*-l/a);s.push(u)}return s.push(s[0]),{type:"Polygon",coordinates:[s]}}var re=function(){return"_"+Math.random().toString(36).substr(2,9)},oe=function(e){var t=W.a.encode(e);return"data:text/plain;base64,".concat(t)},ie=function(e,t){var n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=e,n.download=t,n.click()},se=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n=new FileReader;n.onload=function(){var t=n.result;e(t)},n.readAsText(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=/(-?\d*\.?\d+)[,\s]*(-?\d*\.?\d+)/,ue=function(e){try{var t=JSON.parse(e);if(Array.isArray(t)){if(!t.length||"number"!==typeof t[0])return;return{type:"LineString",coordinates:[t]}}return t}catch(o){try{return Object(V.parse)(e)}catch(o){}}var n=le.exec(e);if(n&&3===n.length){var a=Object(l.a)(n,3),c=a[1],r=a[2];return{type:"Point",coordinates:[Number(c),Number(r)]}}},de=function(e){var t="";if(e)switch(e.type){case"Feature":t+="feature";var n=e;if("Polygon"===n.geometry.type){t+="_polygon";var a=n.geometry.coordinates;if(a.length&&a[0].length){var c=a[0].length;t+="_".concat(c)}}if("MultiPolygon"===n.geometry.type){t+="_multipolygon";var r=n.geometry.coordinates;if(r.length&&r[0].length){var o=r[0].length;t+="_".concat(o)}}break;case"Point":t+="_point";break;case"Polygon":t+="_polygon";break;case"MultiPolygon":t+="_multipolygon";break;case"LineString":t+="linestring";break;case"FeatureCollection":t+="features_".concat(e.features.length)}return t+=q()().format("_YYYYMMDDHHmmss")},je=function(e){try{return localStorage.setItem("saved",JSON.stringify(e)),!0}catch(t){return!1}},be=function(){return new Promise((function(e,t){var n=document.createElement("input");n.type="file";var a=!1;window.addEventListener("focus",(function t(){window.removeEventListener("focus",t),setTimeout((function(){a||e(null),n.remove()}),100)})),n.onchange=function(t){if(t.target instanceof HTMLInputElement){a=!0;var n=Array.from(t.target.files),c=Object(l.a)(n,1)[0];e(c)}},n.click()}))},pe=n(16),fe=(n(61),function(e){var t=e.match,n=e.linkPath,a=e.text;return t?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"breadcrumbs__separator",children:Object(Y.jsx)(G.a,{icon:U.a})}),Object(Y.jsx)(pe.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"breadcrumbs__node",to:n,children:a})]}):null}),Oe=Object(r.memo)(fe),ve=function(e){var t,n=e.iso3166a2,a=e.flagUrl,c=e.fullName,r=Object(I.f)().pathname;return Object(Y.jsxs)("div",{className:"breadcrumbs",children:[Object(Y.jsx)(pe.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"breadcrumbs__node",to:"/",children:"Home"}),Object(Y.jsx)(Oe,{match:"/inspect-geojson"===r,linkPath:"/inspect-geojson",text:"Inspect Geojson"}),Object(Y.jsx)(Oe,{match:"/explore"===r,linkPath:"/explore",text:"Explore"}),Object(Y.jsx)(Oe,{match:"/capitals"===r,linkPath:"/capitals",text:"Capitals"}),Object(Y.jsx)(Oe,{match:r.includes("/country")||r.includes("/countries"),linkPath:"/countries",text:"Countries"}),a&&c?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"breadcrumbs__separator",children:Object(Y.jsx)(G.a,{icon:U.a})}),Object(Y.jsxs)(pe.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"countryNode breadcrumbs__node",to:"/country/".concat(n),children:[Object(Y.jsx)("div",{className:"countryNode__flag",style:(t=f+a,{background:"url(".concat(t,") center center / contain no-repeat")})}),Object(Y.jsx)("div",{className:"countryNode__title",children:c})]})]}):null,Object(Y.jsx)(Oe,{match:r.includes("/neighbours"),linkPath:"/country/".concat(n,"/neighbours"),text:"Neigbours"})]})},me=Object(r.memo)(ve),ge=(n(99),function(e){var t=e.hasNeigbours,n=e.iso3166a2,a=e.flagUrl,c=e.fullName,r=e.mapType,o=e.onMapChange,i=function(e){var t=e.currentTarget.dataset.mapoption;o(t)};return Object(Y.jsxs)("div",{className:"country-page__navbar",children:[Object(Y.jsx)(me,{iso3166a2:n,flagUrl:a,fullName:c}),Object(Y.jsx)("div",{children:t?Object(Y.jsx)(pe.b,{className:"country-page__link",to:"/country/".concat(n,"/neighbours"),children:"Neighbours"}):null}),Object(Y.jsxs)("div",{className:"country-page__navbarMapSwitch",children:[Object(Y.jsx)("div",{onClick:i,"data-mapoption":"leaflet",className:"country-page__navbarMapOption ".concat("leaflet"===r?"country-page__navbarMapOption--selected":null),children:"Leaflet"}),Object(Y.jsx)("div",{onClick:i,"data-mapoption":"svg",className:"country-page__navbarMapOption ".concat("svg"===r?"country-page__navbarMapOption--selected":null),children:"Svg"})]})]})}),he=Object(r.memo)(ge),xe=n(18),_e=(n(100),function(e){var t=e.x,n=e.y,a=e.show,c=e.children,r=Object(xe.useSpring)({opacity:a?1:0});return Object(Y.jsx)(xe.animated.div,{className:"tooltip",style:Object(p.a)(Object(p.a)({},r),{},{top:"".concat(n-60,"px"),left:"".concat(t-90,"px"),display:r.opacity.to((function(e){return 0===e?"none":"block"}))}),children:c})}),ye=(n(101),function(e){var t=e.hasEntered,n=e.region,a=e.x,c=e.y;return Object(Y.jsx)(_e,{show:t&&!!n,x:a,y:c,children:n?Object(Y.jsxs)("div",{className:"region",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)("img",{alt:n.region,className:"region__image",src:f+n.flagUrl})}),Object(Y.jsxs)("div",{className:"region__info",children:[Object(Y.jsxs)("div",{children:["Region: ",n.region]}),Object(Y.jsxs)("div",{children:["Capital: ",n.capital]})]})]}):null})}),Ne=Object(r.memo)(ye),we=n(73),ke=(n(102),function(e){return Object(we.a)(e),Object(Y.jsxs)("div",{className:"country-page__info",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(G.a,{size:"10x",icon:U.l})}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"country-page__infoTitle",children:"Page is under construction"}),Object(Y.jsx)("div",{className:"country-page__infoDescription",children:"The data required for this page might not be prepared or an error occurred while loading it."})]})]})}),Se=Object(r.memo)(ke),Ce=n(20),Ee=function(e){var t=e.center,n=e.bounds,a=Object(H.a)({});return Object(r.useEffect)((function(){a.setView(t)}),[a,t]),Object(r.useEffect)((function(){n&&a.fitBounds(n)}),[a,n]),null},Me=Object(r.memo)(Ee),Le=(n(103),function(){var e=Object(H.a)({click:function(t){var n=e.getCenter(),a=n.lat,c=n.lng;console.log([a,c],e.getZoom())}});return null}),Te=function(){var e=Object(r.useState)({x:-1,y:-1}),t=Object(l.a)(e,2),n=t[0],a=n.x,c=n.y,o=t[1],i=Object(r.useState)({regions:[],pageState:"loading"}),s=Object(l.a)(i,2),u=s[0],f=s[1],O=Object(r.useState)(0),v=Object(l.a)(O,2),m=v[0],g=v[1],h=Object(r.useState)(),_=Object(l.a)(h,2),y=_[0],k=_[1],S=Object(r.useState)(!1),E=Object(l.a)(S,2),M=E[0],H=E[1],z=Object(r.useState)("leaflet"),R=Object(l.a)(z,2),U=R[0],G=R[1],W=Object(r.useState)(),Z=Object(l.a)(W,2),q=Z[0],V=Z[1],X=Object(r.useState)(""),K=Object(l.a)(X,2),Q=K[0],$=K[1],ee=Object(I.g)().iso3166a2,te=Object(I.f)(),ne=Object(r.useState)({lat:51.505,lng:-.09}),ae=Object(l.a)(ne,2),ce=ae[0],re=(ae[1],Object(r.useState)()),oe=Object(l.a)(re,2),ie=oe[0],se=oe[1],le=Object(r.useState)([]),ue=Object(l.a)(le,2),de=ue[0],je=ue[1],be=Object(r.useState)(!1),pe=Object(l.a)(be,2),fe=pe[0],Oe=pe[1],ve=te.pathname.includes("neighbours");Object(r.useEffect)((function(){je([]),f((function(e){return Object(p.a)(Object(p.a)({},e),{},{iso3166a2:ee,pageState:"loading"})}))}),[te,ee]),Object(r.useEffect)((function(){u.iso3166a2==ee&&"loaded"===u.pageState||(ve?Object(b.a)(d.a.mark((function e(){var t,n,a,c,r,o,i,s,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(ee);case 2:return t=e.sent,e.next=5,C(ee);case 5:if(n=e.sent,a=[],t){e.next=10;break}return f((function(e){return Object(p.a)(Object(p.a)({},e),{},{pageState:"error"})})),e.abrupt("return");case 10:c=(null===n||void 0===n?void 0:n.landNeighbours)||[],r=Object(j.a)(c),e.prev=12,r.s();case 14:if((o=r.n()).done){e.next=26;break}if((i=o.value).iso3166a2){e.next=18;break}return e.abrupt("continue",24);case 18:return e.next=20,L(i.iso3166a2);case 20:if(s=e.sent){e.next=23;break}return e.abrupt("continue",24);case 23:a.push(s);case 24:e.next=14;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(12),r.e(e.t0);case 31:return e.prev=31,r.f(),e.finish(31);case 34:console.log(c),l={type:"FeatureCollection",features:a},u=Object(Ce.geoJSON)(l).getBounds(),se(u),je(a),f((function(e){return Object(p.a)(Object(p.a)({},e),{},{iso3166a2:ee,country:t,regions:[],pageState:"loaded"})}));case 40:case"end":return e.stop()}}),e,null,[[12,28,31,34]])})))():Object(b.a)(d.a.mark((function e(){var t,n,a,c,r,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(ee);case 3:return t=e.sent,e.next=6,x(ee);case 6:return n=e.sent,e.next=9,C(ee);case 9:if(a=e.sent,t){e.next=13;break}return f((function(e){return Object(p.a)(Object(p.a)({},e),{},{pageState:"error"})})),e.abrupt("return");case 13:c=Object(l.a)(t.countryCenter,2),r=c[0],o=c[1],i=Object(Ce.latLng)(r,o).toBounds(1e6),se(i),Oe(!!(null===a||void 0===a?void 0:a.landNeighboursCount)),f({iso3166a2:ee,country:t,regions:n,pageState:"loaded"}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),f((function(e){return Object(p.a)(Object(p.a)({},e),{},{pageState:"error"})}));case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))())}),[te,u]);var me=Object(r.useCallback)((function(e){if("loaded"===u.pageState&&(o({x:e.clientX,y:e.clientY}),e.target instanceof SVGElement)){var t=e.target.id;if(t){var n=u.regions.find((function(e){return e.id===t}));n&&k(n)}else k(void 0)}}),[u]);Object(r.useEffect)((function(){Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"svg"!==U){e.next=8;break}return e.next=4,w(ee);case 4:t=e.sent,$(t),e.next=12;break;case 8:return e.next=10,L(ee);case 10:n=e.sent,V(n);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[ee,U]);var ge,xe=function(e){var t=e.currentTarget.dataset.level;g(Number(t))};switch(u.pageState){case"loading":ge=Object(Y.jsx)(F.a,{color:"white",size:15});break;case"error":ge=Object(Y.jsx)(Se,{});break;case"loaded":ge=Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(he,{hasNeigbours:!ve&&fe,iso3166a2:ee,flagUrl:u.country.flagUrl,fullName:u.country.fullName,mapType:U,onMapChange:G}),Object(Y.jsx)(Ne,{hasEntered:M,x:a,y:c,region:y}),Object(Y.jsx)("div",{className:"country-page__map",children:"svg"===U?Object(Y.jsx)(J,{onMouseEnter:function(){H(!0)},onMouseLeave:function(){H(!1)},onMouseMove:me,svg:Q}):Object(Y.jsxs)(T.a,{zoom:u.country.zoom,center:ce,scrollWheelZoom:!0,className:"country-page__leafletMap",children:[Object(Y.jsx)(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(Y.jsx)(Me,{center:ce,bounds:ie}),!ve&&q?Object(Y.jsx)(D.a,{data:q}):null,de.map((function(e,t){return Object(Y.jsx)(D.a,{data:e},t)})),u.country.capitalCenter?Object(Y.jsx)(A.a,{position:u.country.capitalCenter,children:Object(Y.jsx)(B.a,{children:u.country.capital})}):null,Object(Y.jsx)(Le,{})]})}),Object(Y.jsx)("div",{className:"country-page__footer",children:Object(Y.jsxs)("div",{className:"country-page__administrativeDivisions",children:[Object(Y.jsx)("div",{className:"country-page__administrativeDivision ".concat(0===m?"selected":""),"data-level":0,onClick:xe,children:"Country"}),Object(Y.jsx)("div",{className:"country-page__administrativeDivision ".concat(1===m?"selected":""),"data-level":1,onClick:xe,children:"Departments"})]})})]})}return Object(Y.jsx)("div",{className:"country-page ".concat("loaded"!==u.pageState?"center":null),children:ge})},Pe=(n(107),function(e){var t=e.id,n=e.fullName,a=e.capital,c=e.iso3166a2,r=e.iso3166a3,o=e.flagUrl,i=e.neigboursCount,s=e.area,l=e.onClick,u=e.toggled;return Object(Y.jsxs)("div",{"data-id":t,className:"country-item",onClick:l,children:[Object(Y.jsxs)("div",{className:"country-item__row",children:[Object(Y.jsx)("div",{className:"country-item__column",children:n}),Object(Y.jsx)("div",{className:"country-item__column",children:a}),Object(Y.jsx)("div",{className:"country-item__column",children:Object(Y.jsx)("div",{className:"country-item__flag",style:{background:"url(".concat(f+o,") center center / cover")}})}),Object(Y.jsx)("div",{className:"country-item__column",children:c}),Object(Y.jsx)("div",{className:"country-item__column",children:r})]}),u?Object(Y.jsxs)("div",{className:"country-item__details",children:[Object(Y.jsxs)("div",{className:"country-item__field",children:["Neighbours: ",i]}),Object(Y.jsxs)("div",{className:"country-item__field",children:["Area: ",s," km2"]}),Object(Y.jsx)("div",{className:"country-item__bottom",children:Object(Y.jsx)(pe.b,{className:"country-item__link",to:"/country/".concat(c),children:Object(Y.jsx)(G.a,{icon:U.o})})})]}):null]})}),De=(n(108),function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({countries:[],isLoading:!0,hasError:!1}),o=Object(l.a)(c,2),i=o[0],s=o[1];Object(r.useEffect)((function(){Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({pageSize:25,phrase:n.toLowerCase()});case 3:t=e.sent,s({countries:t,isLoading:!1,hasError:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({countries:[],hasError:!0,isLoading:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[n]);var u=function(e){var t=e.currentTarget.dataset.id;s((function(e){return Object(p.a)(Object(p.a)({},e),{},{countries:e.countries.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{toggled:e.id===t&&!e.toggled})}))})}))};return Object(Y.jsxs)("div",{className:"countries-page",children:[Object(Y.jsx)(me,{}),Object(Y.jsxs)("div",{className:"search",children:[Object(Y.jsx)("div",{className:"search__icon",children:Object(Y.jsx)(G.a,{icon:U.r})}),Object(Y.jsx)("input",{className:"search__input",value:n,onChange:function(e){var t=e.currentTarget.value;a(t)},placeholder:"Search...",type:"text"})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"countries-page__headers",children:[Object(Y.jsx)("div",{className:"countries-page__header",children:"Full Name"}),Object(Y.jsx)("div",{className:"countries-page__header",children:"Capital"}),Object(Y.jsx)("div",{className:"countries-page__header",children:"Flag"}),Object(Y.jsx)("div",{className:"countries-page__header",children:"ISO 3166-2"}),Object(Y.jsx)("div",{className:"countries-page__header",children:"ISO 3166-3"})]}),i.countries.map((function(e){return Object(Y.jsx)(Pe,Object(p.a)({toggled:e.toggled||!1,onClick:u},e),e.id)}))]})]})}),Ae=(n(109),function(e){var t=e.onSearch;return Object(Y.jsxs)("div",{className:"toolbar",children:[Object(Y.jsxs)(pe.b,{className:"toolbar__logo",to:"/",children:[Object(Y.jsx)("div",{className:"toolbar__logoText",children:"Geo-shapes"}),Object(Y.jsx)("div",{className:"toolbar__logoIcon",children:Object(Y.jsx)(G.a,{icon:U.k})})]}),Object(Y.jsxs)("div",{className:"toolbar__menu",children:[Object(Y.jsx)(pe.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/",children:Object(Y.jsx)(G.a,{icon:U.m})}),Object(Y.jsx)(pe.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/explore",children:Object(Y.jsx)(G.a,{icon:U.i})}),Object(Y.jsx)(pe.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/draw",children:Object(Y.jsx)(G.a,{icon:U.q})}),Object(Y.jsx)("div",{className:"toolbar__iconButton",onClick:t,children:Object(Y.jsx)(G.a,{icon:U.r})})]})]})}),Be=Object(r.memo)(Ae),He=n(74),Ie=n.n(He),ze=(n(110),function(e){var t=e.capital,n=e.iso3166a2,a=e.flagUrl,c=e.fullName,o=e.id,i=e.thumbnailUrl,s=(e.type,e.onClick),u=Object(r.useState)(f+i),d=Object(l.a)(u,2),j=d[0],b=d[1];return Object(r.useEffect)((function(){if(j){var e=new Image;e.onerror=function(){return b(void 0)},e.src=j}}),[j]),Object(Y.jsxs)("div",{className:"geoObject",children:[Object(Y.jsx)("div",{className:"geoObject__imageWrapper",children:Object(Y.jsx)("div",{className:"geoObject__image",style:{background:j?"url(".concat(j,") center center / cover"):"gray"}})}),Object(Y.jsxs)(pe.b,{className:"geoObject__link",onClick:s,to:"/country/".concat(n),children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"geoObject__name",children:c}),Object(Y.jsx)("div",{className:"geoObject__type",children:t})]}),Object(Y.jsx)("div",{className:"geoObject__flag",style:{background:"url(".concat(f+a,") center center / cover")}})]})]},o)}),Fe=Object(r.memo)(ze),Ye=(n(111),function(e){var t=e.value,n=e.onChange,a=e.onClear,c=Object(r.useCallback)((function(e){var t=e.currentTarget.value;n(t)}),[n]);return Object(Y.jsxs)("div",{className:"searchbox ".concat(t?"searchbox--typed":""),children:[Object(Y.jsx)("div",{className:"searchbox__icon ".concat(t?"searchbox__icon--active":""),children:Object(Y.jsx)(G.a,{icon:U.r})}),Object(Y.jsx)("input",{type:"text",value:t,onChange:c,className:"searchbox__input",placeholder:"I am looking for..."}),t?Object(Y.jsx)("div",{onClick:a,className:"searchbox__clearIcon",children:Object(Y.jsx)(G.a,{icon:U.s})}):null]})}),Re=n(22),Je=(n(112),["className","onClick","icon","disabled"]),Ue=function(e){var t=e.className,n=e.onClick,a=e.icon,c=e.disabled,r=void 0!==c&&c,o=Object(Re.a)(e,Je);return Object(Y.jsx)("div",Object(p.a)(Object(p.a)({},o),{},{onClick:n,className:"icon ".concat(r?"icon--disabled":""," ").concat(n?"icon--interactive":""," ").concat(t),children:Object(Y.jsx)(G.a,{icon:a})}))},Ge=Object(r.memo)(Ue),We=(n(113),function(e){var t=e.isShowing,n=e.onHide,a=e.onClick,c=Object(r.useState)({isLoading:!0,items:[]}),o=Object(l.a)(c,2),i=o[0],s=i.isLoading,u=i.items,j=o[1],f=Object(r.useState)(""),O=Object(l.a)(f,2),v=O[0],m=O[1],g=Ie()(v,1e3),x=Object(l.a)(g,1)[0],_=Object(xe.useSpring)({opacity:t?1:0}),y=Object(r.useCallback)((function(){m("")}),[]);return Object(r.useEffect)((function(){j({isLoading:!0,items:[]})}),[v]),Object(r.useEffect)((function(){t?Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({pageSize:10,phrase:x});case 2:t=e.sent,j({isLoading:!1,items:t});case 4:case"end":return e.stop()}}),e)})))():(j({isLoading:!0,items:[]}),m(""))}),[t,x]),Object(Y.jsxs)(xe.animated.div,{style:Object(p.a)(Object(p.a)({},_),{},{display:_.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"searchDialog ".concat(""),children:[Object(Y.jsx)("div",{className:"searchDialog__navbar",children:Object(Y.jsx)(Ge,{onClick:n,className:"searchDialog__close",icon:U.s})}),Object(Y.jsxs)("div",{className:"searchDialog__body",children:[Object(Y.jsx)("div",{className:"searchDialog__top",children:Object(Y.jsx)(Ye,{onChange:m,onClear:y,value:v})}),Object(Y.jsx)("div",{className:"searchDialog__list ".concat(s?"searchDialog__list--center":""),children:s?Object(Y.jsx)(F.a,{color:"white",size:15}):u.map((function(e){return"country"===e.type&&Object(Y.jsx)(Fe,Object(p.a)({onClick:a},e),e.id)}))})]})]})}),Ze=n(11),qe=n(377),Ve={type:"Polygon",coordinates:[[]]},Xe=function(e){var t=e.drawOption,n=e.geoObjects,a=e.onChange,c=Object(r.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)({lat:50,lng:-1}),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(!1),O=Object(l.a)(f,2),v=O[0],m=O[1],g=Object(r.useState)(!1),h=Object(l.a)(g,2),x=h[0],_=h[1],y=Object(r.useState)(10),N=Object(l.a)(y,2),w=N[0],k=N[1],S=Object(r.useState)(Ve),C=Object(l.a)(S,2),E=C[0],M=C[1],L=Object(H.a)({click:function(e){if(v||"circle"!==t||(L.dragging.disable(),m(!0),b(e.latlng),k(100)),!x&&v&&"circle"===t&&(L.dragging.enable(),_(!0)),"polygon"===t){var n=e.latlng,a=n.lat,c=[n.lng,a];M((function(e){var t=[].concat(Object(Ze.a)(e.coordinates[0]),[c]);return Object(p.a)(Object(p.a)({},e),{},{coordinates:[t]})}))}if("lineString"===t){var r=e.latlng,o=r.lat,i=[r.lng,o];M((function(e){var t=[].concat(Object(Ze.a)(e.coordinates),[i]);return Object(p.a)(Object(p.a)({},e),{},{coordinates:t})}))}},mouseup:function(e){},mousemove:function(e){if(v&&!x&&"circle"===t){var n=e.latlng.distanceTo(j);k(n)}}});Object(r.useEffect)((function(){if(x&&"lineString"===t&&(a({id:re(),selected:!1,data:E}),M(Ve),_(!1)),x&&"polygon"===t&&(a({id:re(),selected:!1,data:E}),M(Ve),_(!1)),x&&"circle"===t){var e=ce([j.lng,j.lat],w);m(!1),_(!1),a({id:re(),selected:!1,data:e})}}),[E,a,w,j,t,x]),Object(r.useEffect)((function(){"none"!==t&&("polygon"===t&&"Polygon"===E.type||"circle"===t&&"Polygon"===E.type||"lineString"===t&&"LineString"===E.type||M((function(e){var n="LineString",a=[];return"lineString"===t&&(n="LineString",a=[]),"circle"===t&&(n="Polygon",a=[[]]),"polygon"===t&&(n="Polygon",a=[[]]),{type:n,coordinates:a}})))}),[E,t]);var T=function(e){"Enter"===e.key&&_(!0)};return Object(r.useEffect)((function(){return window.addEventListener("keydown",T),function(){window.removeEventListener("keydown",T)}}),[]),Object(Y.jsxs)(Y.Fragment,{children:[x||"circle"!==t?null:Object(Y.jsx)("div",{className:"draw-page__popup",children:"To draw a circle, click on the map, move mouse to set radius and click to finish"}),x||"lineString"!==t?null:Object(Y.jsx)("div",{className:"draw-page__popup",children:"To draw a line string, click on the map and press enter to finish"}),x||"polygon"!==t?null:Object(Y.jsx)("div",{className:"draw-page__popup",children:"To draw a polygon, click on the map and press enter to finish"}),n.map((function(e){return Object(Y.jsx)(D.a,{data:e.data,style:{color:e.selected?"blue":"gray"}},e.id)})),Object(Y.jsx)(D.a,{data:E},Math.random()),v?Object(Y.jsx)(qe.a,{eventHandlers:{mousemove:function(e){i&&b(e.latlng)},mousedown:function(e){s(!0),L.dragging.disable()},mouseup:function(e){s(!1),L.dragging.enable()}},center:j,radius:w}):null]})},Ke=n(49),Qe=n.n(Ke),$e=n(50),et=n.n($e),tt=(n(327),function(e){var t=e.id,n=e.isShowing,a=e.onHide,c=e.onExport,o=e.data,i=e.exportType,s=Object(r.useRef)(null),l=Object(xe.useSpring)({opacity:n?1:0}),u="geojson"===i?Qe()(o):o;return Object(r.useEffect)((function(){var e=s.current;if(e){var t=function(t){var n=t.target;e.contains(n)||a()};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[s,a,n]),Object(Y.jsx)(xe.animated.div,{ref:s,style:Object(p.a)(Object(p.a)({},l),{},{display:l.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"preview-dialog__overlay",children:Object(Y.jsxs)("div",{className:"preview-dialog",children:[Object(Y.jsxs)("div",{className:"preview-dialog__topBar",children:[Object(Y.jsxs)("div",{className:"preview-dialog__right",children:[Object(Y.jsx)(Ge,{onClick:function(){navigator.clipboard.writeText(u)},className:"",icon:U.c}),Object(Y.jsx)(Ge,{onClick:function(){return c(t)},className:"",icon:U.f})]}),Object(Y.jsx)(Ge,{onClick:a,className:"preview-dialog__close",icon:U.s})]}),Object(Y.jsx)("div",{className:"preview-dialog__body",children:o?Object(Y.jsx)(et.a,{className:"geojson"===i?"json":"none",children:u}):null})]})})}),nt=(n(328),n(329),["checked","onChange","label"]),at=function(e){var t=e.checked,n=e.onChange,a=e.label,c=Object(Re.a)(e,nt);return Object(Y.jsx)("div",{className:"checkbox",children:Object(Y.jsxs)("label",{className:"checkbox__label ".concat(t?"checkbox__label--selected":""),children:[Object(Y.jsx)("input",Object(p.a)(Object(p.a)({},c),{},{className:"checkbox__input",type:"checkbox",onChange:n,checked:t})),a]})})},ct=Object(r.memo)(at),rt=function(e){var t=e.drawOption,n=e.exportType,a=e.data,c=e.geoObjects,r=e.onChange,o=e.onExport,i=e.onPreview,s=e.onHide,l=e.onRemoveShapes,u=e.onItemClick,d=e.onAllItemsSelect,j=e.selectedCount,b=e.isPreviewShowing,p=!e.dataAvailable,f=function(e){var t=e.currentTarget.dataset.id;r({drawOption:t,exportType:n})},O=function(e){var n=e.currentTarget.dataset.id;r({drawOption:t,exportType:n})},v=function(e){var t=e.currentTarget.dataset.id;u(t)},m=function(e){var t=e.currentTarget.dataset.id;u(t)};return Object(Y.jsxs)("div",{className:"draw-page__panel",children:[Object(Y.jsxs)("div",{className:"draw-page__topBar",children:["Remove shapes ",Object(Y.jsx)(Ge,{disabled:p,onClick:l,className:"",icon:U.t})]}),Object(Y.jsxs)("div",{className:"draw-page__toolbox",children:[Object(Y.jsx)(Ge,{"data-id":"polygon",onClick:f,className:"draw-page__tool ".concat("polygon"===t?"selected":""),icon:U.g}),Object(Y.jsx)(Ge,{"data-id":"lineString",onClick:f,className:"draw-page__tool ".concat("lineString"===t?"selected":""),icon:U.q}),Object(Y.jsx)(Ge,{"data-id":"circle",onClick:f,className:"draw-page__tool ".concat("circle"===t?"selected":""),icon:U.b})]}),Object(Y.jsxs)("div",{className:"items-section",children:[Object(Y.jsxs)("div",{className:"items-section__header",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(ct,{onChange:d,checked:!(!c.length||j!==c.length)})}),Object(Y.jsx)("div",{className:"items-section__title",children:"Items"})]}),c.map((function(e){return Object(Y.jsxs)("div",{className:"items-section__item","data-id":e.id,onClick:v,children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(ct,{"data-id":e.id,onChange:m,checked:e.selected})}),Object(Y.jsx)("div",{children:e.id})]},e.id)}))]}),Object(Y.jsxs)("div",{className:"export-section",children:[Object(Y.jsx)("div",{className:"export-section__title",children:"Export"}),Object(Y.jsxs)("div",{className:"export",children:[Object(Y.jsx)("div",{"data-id":"geojson",onClick:O,className:"export__option ".concat("geojson"===n?"export__option--selected":""),children:"Geojson"}),Object(Y.jsx)("div",{"data-id":"wkt",onClick:O,className:"export__option ".concat("wkt"===n?"export__option--selected":""),children:"WKT"})]}),Object(Y.jsx)(tt,{id:null===a||void 0===a?void 0:a.id,data:a,onExport:o,onHide:s,isShowing:b,exportType:n}),Object(Y.jsxs)("div",{className:"payload",children:[Object(Y.jsx)(Ge,{disabled:p,onClick:i,className:"payload__option",icon:U.i}),Object(Y.jsx)(Ge,{disabled:p,onClick:function(){navigator.clipboard.writeText(JSON.stringify(a))},className:"payload__option",icon:U.c}),Object(Y.jsx)(Ge,{disabled:p,onClick:o,className:"payload__option",icon:U.f})]})]})]})},ot=Object(r.memo)(rt),it=(n(330),function(){var e=Object(r.useState)({geoObjects:[],selectedCount:0}),t=Object(l.a)(e,2),n=t[0],a=n.geoObjects,c=n.selectedCount,o=t[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),u=s[0],d=s[1],j=Object(r.useState)("none"),b=Object(l.a)(j,2),f=b[0],O=b[1],v=Object(r.useState)("geojson"),m=Object(l.a)(v,2),g=m[0],h=m[1],x=Object(r.useState)(),_=Object(l.a)(x,2),y=_[0],N=_[1];return Object(Y.jsxs)("div",{className:"draw-page",children:[Object(Y.jsx)(ot,{geoObjects:a,drawOption:f,exportType:g,onChange:function(e){O(e.drawOption),h(e.exportType),N("")},onExport:function(){var e=oe(JSON.stringify(y));ie(e,"geojson"===g?"data.geojson":"wkt.txt")},onPreview:function(){var e;if(e=1===a.length?a[0].data:{type:"GeometryCollection",geometries:Object(Ze.a)(a.map((function(e){return e.data})))},"wkt"===g){var t=Object(V.stringify)(e);return t=t.replace(/,/g,",\n"),N(t),void d(!0)}N(e),d(!0)},onHide:function(){return d(!1)},onRemoveShapes:function(){return o({geoObjects:[],selectedCount:0})},onItemClick:function(e){o((function(t){var n=Object(Ze.a)(t.geoObjects.map((function(e){return Object(p.a)({},e)}))),a=n.find((function(t){return t.id===e}));a.selected=!a.selected;var c=t.selectedCount;return{geoObjects:n,selectedCount:c=a.selected?c+1:c-1}}))},onAllItemsSelect:function(){o((function(e){var t=!!e.geoObjects.some((function(e){return!1===e.selected})),n=Object(Ze.a)(e.geoObjects.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{selected:t})})));return{geoObjects:n,selectedCount:t?n.length:0}}))},data:y,selectedCount:c,dataAvailable:!!a.length,isPreviewShowing:u}),Object(Y.jsxs)(T.a,{zoom:4,center:[51.505,-.09],scrollWheelZoom:!0,className:"draw-page__map",children:[Object(Y.jsx)(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(Y.jsx)(Xe,{onChange:function(e){o((function(t){return Object(p.a)(Object(p.a)({},t),{},{geoObjects:[].concat(Object(Ze.a)(t.geoObjects),[e])})})),O("none")},geoObjects:a,drawOption:f})]})]})}),st=n(78),lt=n(76),ut=(n(331),function(e){var t=e.id,n=e.isSelected,a=e.loadedAt,c=e.name,r=e.featuresCount,o=e.warning,i=e.invalid,s=e.onDelete,l=e.onShowOnMap,u=e.onShowGeojson,d=e.onShowWarning,j=e.onExport,b=e.onToggle,p=function(){return d(t)};return Object(Y.jsxs)("div",{className:"uploaded-item ".concat(n?"selected":""),children:[Object(Y.jsxs)("div",{className:"uploaded-item__topBar",children:[Object(Y.jsxs)("div",{"data-id":t,onClick:b,children:[Object(Y.jsx)("div",{className:"uploaded-item__title",children:c}),Object(Y.jsxs)("div",{className:"uploaded-item__detail",children:["Loaded at: ",new Date(a).toLocaleString()]})]}),Object(Y.jsx)(Ge,{"data-id":t,className:"uploaded-item__delete",onClick:s,icon:U.s})]}),i?Object(Y.jsx)("div",{className:"uploaded-item__body",children:o?Object(Y.jsx)(Ge,{className:"popup__iconButton",onClick:p,icon:U.h}):null}):Object(Y.jsxs)("div",{className:"uploaded-item__body",children:[Object(Y.jsx)(Ge,{className:"popup__iconButton",onClick:function(){return l(t)},icon:U.e}),r?Object(Y.jsxs)("div",{className:"uploaded-item__detail",children:["Features: ",r]}):null,Object(Y.jsx)(Ge,{className:"popup__iconButton",onClick:function(){return j(t)},icon:U.f}),Object(Y.jsx)(Ge,{className:"popup__iconButton",onClick:function(){return u(t)},icon:U.d}),o?Object(Y.jsx)(Ge,{className:"popup__iconButton",onClick:p,icon:U.h}):null]})]})}),dt=(n(332),function(e){var t=e.isShowing,n=Object(xe.useSpring)({opacity:t?1:0});return Object(Y.jsx)(xe.animated.div,{style:Object(p.a)(Object(p.a)({},n),{},{display:n.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"explore-page__dropOverlay",children:Object(Y.jsxs)("div",{className:"explore-page__dropModal",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(G.a,{size:"5x",icon:U.j})}),Object(Y.jsx)("div",{className:"explore-page__dropModalText",children:"Drop geojson/json array lat lng or lat lng"})]})})}),jt=Object(r.memo)(dt),bt=function(e){var t=e.id,n=e.data,a=e.eventHandlers,c=e.isSelected,o=Object(r.useMemo)((function(){return{color:c?"blue":"gray"}}),[c]),i=Object(r.useCallback)((function(e){e.id=t}),[t]);return Object(Y.jsx)(D.a,{data:n,"data-id":t,style:o,eventHandlers:a,onEachFeature:i})},pt=Object(r.memo)(bt),ft=(n(333),function(e){var t,n=e.x,a=e.y,c=e.isShowing,o=e.onAction,i=e.onHide,s=Object(r.useRef)(null),l=Object(xe.useSpring)({opacity:c?1:0});Object(r.useEffect)((function(){var e=s.current;if(e){var t=function(t){var n=t.target;e.contains(n)||i()};return c&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[s,i,c]);var u=function(e){var t=e.currentTarget.dataset.action;o(t)},d=((null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.getBoundingClientRect())||{height:0}).height;return Object(Y.jsx)(xe.animated.div,{ref:s,style:Object(p.a)(Object(p.a)({},l),{},{top:"".concat(a-d/2,"px"),left:"".concat(n,"px"),display:l.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"menu__overlay",children:Object(Y.jsxs)("div",{className:"menu",children:[Object(Y.jsx)("div",{className:"menu__item",onClick:u,"data-action":"nearby-country",children:"Get nearby country"}),Object(Y.jsx)("div",{className:"menu__item",onClick:u,"data-action":"nearby-continent",children:"Get nearby continent"})]})})}),Ot=function(e){var t=e.onAction,n=e.geojsonObjects,a=e.center,c=e.bounds,o=Object(r.useState)({x:0,y:0,latlng:{lat:-1,lng:-1},isShowing:!1}),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(H.a)({click:function(e){var t=e.propagatedFrom;if(t&&t.feature)e.propagatedFrom.feature.id},contextmenu:function(e){var t=e.originalEvent;t.preventDefault();var n=t.clientX,a=t.clientY,c=e.latlng;u({x:n,y:a,latlng:c,isShowing:!0})}});Object(r.useEffect)((function(){d.setView(a)}),[d,a]),Object(r.useEffect)((function(){c&&d.fitBounds(c)}),[d,c]);var j=Object(r.useMemo)((function(){return{click:function(e){var t=e.sourceTarget;if("feature"in t)t.feature.id}}}),[]),b=function(){return u((function(e){return Object(p.a)(Object(p.a)({},e),{},{isShowing:!1})}))};return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(ft,Object(p.a)(Object(p.a)({},s),{},{onAction:function(e){t(e,s.latlng),b()},onHide:b})),n.filter((function(e){return!e.invalid})).map((function(e){return Object(Y.jsx)(pt,Object(p.a)(Object(p.a)({},e),{},{eventHandlers:j,data:e.data}),e.id)}))]})},vt=Object(r.memo)(Ot),mt=(n(334),function(e){var t=e.id,n=e.isShowing,a=e.onHide,c=e.onExport,o=e.data,i=Object(r.useRef)(null),s=Object(xe.useSpring)({opacity:n?1:0});Object(r.useEffect)((function(){var e=i.current;if(e){var t=function(t){var n=t.target;e.contains(n)||a()};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[i,a,n]);var l=n?Qe()(o):"";return Object(Y.jsx)(xe.animated.div,{ref:i,style:Object(p.a)(Object(p.a)({},s),{},{display:s.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"preview-dialog__overlay",children:Object(Y.jsxs)("div",{className:"preview-dialog",children:[Object(Y.jsxs)("div",{className:"preview-dialog__topBar",children:[Object(Y.jsxs)("div",{className:"preview-dialog__right",children:[Object(Y.jsx)(Ge,{onClick:function(){},className:"",icon:U.c}),Object(Y.jsx)(Ge,{onClick:function(){return c(t)},className:"",icon:U.f})]}),Object(Y.jsx)(Ge,{onClick:a,className:"preview-dialog__close",icon:U.s})]}),Object(Y.jsx)("div",{className:"preview-dialog__body",children:l?Object(Y.jsx)(et.a,{className:"json",children:l}):null})]})})}),gt=Object(r.memo)(mt),ht=(n(335),function(e){var t=e.isShowing,n=e.onHide,a=e.warning,c=Object(r.useRef)(null),o=Object(xe.useSpring)({opacity:t?1:0});return Object(r.useEffect)((function(){var e=c.current;if(e){var a=function(t){var a=t.target;e===a&&n()};return t&&window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}}),[c,n,t]),Object(Y.jsx)(xe.animated.div,{ref:c,style:Object(p.a)(Object(p.a)({},o),{},{display:o.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"warning-dialog__overlay",children:Object(Y.jsxs)("div",{className:"warning-dialog",children:[Object(Y.jsx)(Ge,{onClick:n,className:"warning-dialog__closeIcon",icon:U.s}),Object(Y.jsxs)("div",{className:"warning-dialog__body",children:[Object(Y.jsx)(Ge,{className:"warning-dialog__warningIcon",icon:U.h}),Object(Y.jsx)("div",{className:"warning-dialog__text",children:a})]})]})})}),xt=Object(r.memo)(ht),_t=(n(336),function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)({id:"",warning:"",data:{type:"Point"}}),f=Object(l.a)(u,2),O=f[0],v=O.id,m=O.warning,g=O.data,h=f[1],x=Object(r.useState)(!1),_=Object(l.a)(x,2),y=_[0],N=_[1],w=Object(r.useState)(""),C=Object(l.a)(w,2),L=C[0],D=C[1],A=Object(r.useState)(),B=Object(l.a)(A,2),H=B[0],I=B[1],z=Object(r.useState)(),F=Object(l.a)(z,2),R=F[0],J=F[1],G=Object(r.useState)([51.505,-.09]),W=Object(l.a)(G,2),Z=W[0],V=(W[1],Object(r.useCallback)((function(e){e.length&&(s(!0),Object(b.a)(d.a.mark((function t(){var c,r,o,i,l,u,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=new Array,r=Object(j.a)(e),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=16;break}return i=o.value,t.next=8,se(i);case 8:l=t.sent,u=ue(l),0,b={id:re(),name:i.name,fileName:i.name,loadedAt:new Date,isSelected:!1,featuresCount:0,data:u,invalid:!u},c.push(b),je(c)||(b.warning="We could not save geo-object to local storage. The file size is too big.");case 14:t.next=4;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:c=c.concat(n),a(c),s(!1);case 27:case"end":return t.stop()}}),t,null,[[2,18,21,24]])})))())}),[n])),X=Object(st.a)({onDrop:V}),K=X.getRootProps,Q=X.isDragActive;Object(r.useEffect)((function(){var e=localStorage.getItem("saved");e&&new Promise((function(){var t=JSON.parse(e);a(t),s(!1)}))}),[]),Object(r.useEffect)((function(){var e=function(){var t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.readText();case 3:n=t.sent,D(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:setTimeout(e,2e3);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();setTimeout(e,2e3)}),[]);var $=function(e){var t,n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(n){var c=ue(n);if(c){var r=de(c),o={id:re(),name:r,loadedAt:new Date,isSelected:!1,featuresCount:0,data:c,invalid:!c};a((function(e){return[].concat(Object(Ze.a)(e),[o])}))}}};Object(r.useEffect)((function(){return window.addEventListener("paste",$),function(){window.removeEventListener("paste",$)}}),[]);var ee=function(e){var t=e.currentTarget.dataset.id;a((function(e){var n=Object(Ze.a)(e);if(!n.some((function(e){return e.id===t})))return e;var a,c=Object(j.a)(n);try{for(c.s();!(a=c.n()).done;){var r=a.value;r.isSelected&&(r.isSelected=!r.isSelected),r.id===t&&(r.isSelected=!r.isSelected)}}catch(o){c.e(o)}finally{c.f()}return n}))},te=function(e){var t=e.currentTarget.dataset.id;a((function(e){var n=e.filter((function(e){return e.id!==t&&!e.warning}));return localStorage.setItem("saved",JSON.stringify(n)),n}))},ne=function(e){var t=n.find((function(t){return t.id===e}));if(!t.invalid){var a=Object(Ce.geoJSON)(t.data).getBounds();I(a)}},ae=function(e){var t=n.find((function(t){return t.id===e}));J("show-warning"),h((function(e){return Object(p.a)(Object(p.a)({},e),{},{warning:t.warning})}))},ce=Object(r.useCallback)((function(){return J(void 0)}),[]),le=function(e){var t=n.find((function(t){return t.id===e}));t.invalid||(J("show-preview"),h((function(e){return Object(p.a)(Object(p.a)({},e),{},{id:t.id,data:t.data})})))},pe=function(e){var t=n.find((function(t){return t.id===e})),a=oe(JSON.stringify(null===t||void 0===t?void 0:t.data)),c=t.fileName?t.fileName:"".concat(t.name,".geojson");ie(a,c)},fe=Object(r.useCallback)((function(e,t){var n=t.lat,c=t.lng;s(!0),"nearby-continent"==e&&Object(b.a)(d.a.mark((function e(){var t,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(c,n);case 3:if(t=e.sent){e.next=7;break}return s(!1),e.abrupt("return");case 7:return e.next=9,M(t);case 9:if(r=e.sent){e.next=13;break}return s(!1),e.abrupt("return");case 13:o=q()().format("_YYYYMMDDHHmmss"),a((function(e){return[].concat(Object(Ze.a)(e),[{id:re(),data:r,name:"".concat(t).concat(o),area:0,featuresCount:0,invalid:!1,isSelected:!1,loadedAt:new Date,points:0}])})),s(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),s(!0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))(),"nearby-country"===e&&Object(b.a)(d.a.mark((function e(){var t,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(c,n);case 3:if(t=e.sent){e.next=7;break}return s(!1),e.abrupt("return");case 7:return e.next=9,E(t);case 9:if(r=e.sent,o=q()().format("_YYYYMMDDHHmmss"),r){e.next=14;break}return s(!1),e.abrupt("return");case 14:a((function(e){var n=[].concat(Object(Ze.a)(e),[{id:re(),data:r,name:"".concat(t).concat(o),area:0,featuresCount:0,invalid:!1,isSelected:!1,loadedAt:new Date,points:0}]);return localStorage.setItem("saved",JSON.stringify(n)),n})),setTimeout((function(){s(!1)}),1e3),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),s(!1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))(),ce()}),[ce]),Oe=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c,r,o,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),N(!0),e.next=4,be();case 4:if(t=e.sent){e.next=8;break}return s(!1),e.abrupt("return");case 8:return e.next=10,se(t);case 10:if(c=e.sent,r=ue(c)){e.next=15;break}return s(!1),e.abrupt("return");case 15:o=de(r),i={id:re(),name:o,data:r,invalid:!r,area:0,featuresCount:0,isSelected:!1,loadedAt:new Date,points:0},l=[].concat(Object(Ze.a)(n),[i]),je(l)||(i.warning="We could not save geo-object to local storage. The file size is too big."),a(l),s(!1);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsxs)("div",Object(p.a)(Object(p.a)({className:"explore-page"},K()),{},{children:[Object(Y.jsx)(jt,{isShowing:Q}),Object(Y.jsx)(gt,{id:v,onHide:ce,onExport:pe,isShowing:"show-preview"===R,data:g}),Object(Y.jsx)(xt,{isShowing:"show-warning"===R,warning:m,onHide:ce}),Object(Y.jsxs)("div",{className:"explore-page__navbar",children:[Object(Y.jsx)(me,{}),Object(Y.jsx)(Ge,{className:"navbar__upload",onClick:Oe,icon:U.u}),Object(Y.jsx)(Ge,{disabled:!L,className:"navbar__clipboard",onClick:function(){N(!0),s(!0);var e=ue(L),t="clipboard";e&&(t+="_".concat(de(e))),t+=q()().format("_YYYYMMDDHHmmss");var c={id:re(),name:t,loadedAt:new Date,isSelected:!1,featuresCount:0,data:e,invalid:!e},r=[].concat(Object(Ze.a)(n),[c]);je(r)||(c.warning="We could not save geo-object to local storage. The file size is too big."),a(r),s(!1)},icon:U.c}),Object(Y.jsx)(Ge,{className:"navbar__toggle",onClick:function(){return N((function(e){return!e}))},icon:U.n})]}),Object(Y.jsxs)("div",{className:"explore-page__content",children:[Object(Y.jsxs)(T.a,{zoom:4,center:Z,scrollWheelZoom:!0,className:"explore-page__map",children:[Object(Y.jsx)(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(Y.jsx)(vt,{onAction:fe,geojsonObjects:n,center:Z,bounds:H})]}),y?Object(Y.jsxs)("div",{className:"explore-page__panel",children:[Object(Y.jsx)("div",{className:"explore-page__loader",children:Object(Y.jsx)(lt.BarLoader,{speedMultiplier:.5,color:i?"white":"transparent",width:"100%"})}),Object(Y.jsx)("div",{className:"explore-page__toolbar"}),Object(Y.jsx)("div",{className:"explore-page__list",children:n.map((function(e){return Object(Y.jsx)(ut,Object(p.a)({onDelete:te,onExport:pe,onToggle:ee,onShowWarning:ae,onShowOnMap:ne,onShowGeojson:le},e),e.id)}))})]}):null]})]}))}),yt=n(77),Nt=(n(362),n(57)),wt=(n(363),[{icon:U.n,text:"List of countries",link:"/countries"},{icon:U.n,text:"List of capitals",link:"/capitals"},{icon:U.p,text:"Draw shapes",link:"/draw"},{icon:Nt.a,text:"Explore map",link:"/explore"},{icon:Nt.a,text:"Inspect Geojson",link:"/inspect-geojson"}]),kt=function(){var e="".concat(f,"/assets/background.jpg");return Object(Y.jsxs)("div",{className:"home",children:[Object(Y.jsx)("div",{className:"background",style:{background:"url(".concat(e,") center center / cover")}}),Object(Y.jsx)("div",{className:"header",children:"Explore"}),Object(Y.jsx)("div",{className:"list",children:wt.map((function(e){return Object(Y.jsxs)(pe.b,{to:e.link,className:"link",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(G.a,{size:"2x",icon:e.icon})}),Object(Y.jsx)("div",{className:"link__text",children:e.text})]},e.link)}))})]})},St=Object(r.memo)(kt),Ct=function(e){var t=new Array,n="None";if("Feature"===e.type){n="Feature";var a=e;if("MultiPolygon"===a.geometry.type){n+="_MultiPolygon";var c,r=a.geometry.coordinates,o=Object(j.a)(r);try{for(o.s();!(c=o.n()).done;){var i={type:"Polygon",coordinates:c.value};t.push(i)}}catch(p){o.e(p)}finally{o.f()}return[n,t]}if("Polygon"===a.geometry.type){n+="_Polygon";var s={type:"Polygon",coordinates:a.geometry.coordinates};return t.push(s),[n,t]}}if("MultiPolygon"===e.type){n="MultiPolygon";var l,u=e,d=Object(j.a)(u.coordinates);try{for(d.s();!(l=d.n()).done;){var b={type:"Polygon",coordinates:l.value};t.push(b)}}catch(p){d.e(p)}finally{d.f()}return[n,t]}return[n,t]},Et=(n(364),function(){var e=Object(r.useState)([51.505,-.09]),t=Object(l.a)(e,2),n=t[0],a=(t[1],Object(r.useState)({header:"",data:[]})),c=Object(l.a)(a,2),o=c[0],i=o.header,s=o.data,u=c[1];Object(r.useEffect)((function(){}),[]);var f=function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,a,c,r,o,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,se(t);case 7:if(n=e.sent,a=ue(n)){e.next=11;break}return e.abrupt("return",!1);case 11:c=Ct(a),r=Object(l.a)(c,2),o=r[0],i=r[1],s=i.map((function(e,t){return{id:(Date.now()+t).toString(),name:"".concat(e.type,"_").concat(t+1),selected:!1,data:e}})),u({header:o,data:s});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){var t=e.currentTarget.dataset.id;u((function(e){var n,a=e.header,c=e.data.map((function(e){return Object(p.a)({},e)})),r=Object(j.a)(c.filter((function(e){return e.selected})));try{for(r.s();!(n=r.n()).done;){n.value.selected=!1}}catch(i){r.e(i)}finally{r.f()}var o=c.find((function(e){return e.id===t}));return o.selected=!o.selected,{header:a,data:c}}))};return Object(Y.jsxs)("main",{className:"inspect-geojson",children:[Object(Y.jsx)("nav",{className:"inspect-geojson__topBar",children:Object(Y.jsx)(me,{})}),Object(Y.jsxs)("div",{className:"inspect-geojson__container",children:[Object(Y.jsxs)("div",{className:"inspect-geojson__panel",children:[Object(Y.jsx)("nav",{className:"inspect-geojson__panelTopBar",children:Object(Y.jsx)(Ge,{className:"navbar__upload",onClick:f,icon:U.u})}),Object(Y.jsxs)("div",{className:"inspect-geojson__content",children:[Object(Y.jsx)("div",{onClick:function(){u((function(e){return{header:e.header,data:e.data.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{selected:!0})}))}}))},className:"inspect-geojson__header",children:i}),s.map((function(e){return Object(Y.jsx)("div",{"data-id":e.id,onClick:O,className:"inspect-geojson__item ".concat(e.selected?"inspect-geojson__item--selected":""),children:e.name},e.id)}))]})]}),Object(Y.jsx)("div",{className:"inspect-geojson__view",children:Object(Y.jsxs)(T.a,{zoom:4,center:n,scrollWheelZoom:!0,className:"explore-page__map",children:[Object(Y.jsx)(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.map((function(e){return Object(Y.jsx)(D.a,{style:{color:e.selected?"blue":"gray"},data:e.data},e.id)}))]})})]})]})}),Mt=Object(r.memo)(Et),Lt={"british-overseas-territory":"British overseas territory","unincorporated-territory-usa":"Unincorporated territories of the United States","crown-dependency":"Crown dependency","disputed-territories":"Disputed territories","autonomous-region-of-portugal":"Autonomous egion of Portugal","constituent country":"Constituent country","france-overseas-territory":"France overseas territory",country:"Country"},Tt=(n(365),function(e){var t=e.id,n=e.fullName,a=e.capital,c=e.flagUrl,r=e.type,o=e.onClick,i=e.toggled;return Object(Y.jsxs)("div",{"data-id":t,className:"item",onClick:o,children:[Object(Y.jsxs)("div",{className:"item__row",children:[Object(Y.jsx)("div",{className:"item__column",children:n}),Object(Y.jsx)("div",{className:"item__column",children:a}),Object(Y.jsx)("div",{className:"item__column",children:Lt[r]}),Object(Y.jsx)("div",{className:"item__column",children:Object(Y.jsx)("div",{className:"item__flag",style:{background:"url(".concat(f+c,") center center / cover")}})})]}),i?Object(Y.jsx)("div",{className:"item__details",children:Object(Y.jsx)("div",{className:"item__bottom"})}):null]})}),Pt=(n(366),function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({items:[],isLoading:!0,hasError:!1}),o=Object(l.a)(c,2),i=o[0],s=o[1];Object(r.useEffect)((function(){Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({pageSize:25,phrase:n.toLowerCase()});case 3:t=e.sent,s({items:t,isLoading:!1,hasError:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({items:[],hasError:!0,isLoading:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[n]);var u=function(e){var t=e.currentTarget.dataset.id;s((function(e){return Object(p.a)(Object(p.a)({},e),{},{items:e.items.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{toggled:e.id===t&&!e.toggled})}))})}))};return Object(Y.jsxs)("div",{className:"capitals-page",children:[Object(Y.jsx)(me,{}),Object(Y.jsxs)("div",{className:"search",children:[Object(Y.jsx)("div",{className:"search__icon",children:Object(Y.jsx)(G.a,{icon:U.r})}),Object(Y.jsx)("input",{className:"search__input",value:n,onChange:function(e){var t=e.currentTarget.value;a(t)},placeholder:"Search...",type:"text"})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"table__headers",children:[Object(Y.jsx)("div",{className:"table__header",children:"Territory"}),Object(Y.jsx)("div",{className:"table__header",children:"Capital"}),Object(Y.jsx)("div",{className:"table__header",children:"Type"}),Object(Y.jsx)("div",{className:"table__header",children:"Flag"})]}),i.items.map((function(e){return Object(Y.jsx)(Tt,Object(p.a)({toggled:e.toggled||!1,onClick:u},e),e.id)}))]})]})}),Dt=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(){return a(!1)};return Object(Y.jsxs)("div",{className:"app",children:[Object(Y.jsx)(Be,{onSearch:function(){return a(!0)}}),Object(Y.jsx)(We,{onHide:c,onClick:c,isShowing:n}),Object(Y.jsxs)(I.c,{children:[Object(Y.jsx)(I.a,{exact:!0,path:"/",component:St}),Object(Y.jsx)(I.a,{exact:!0,path:"/explore",component:_t}),Object(Y.jsx)(I.a,{exact:!0,path:"/draw",component:it}),Object(Y.jsx)(I.a,{exact:!0,path:"/country/:iso3166a2",component:Te}),Object(Y.jsx)(I.a,{exact:!0,path:"/country/:iso3166a2/neighbours",component:Te}),Object(Y.jsx)(I.a,{exact:!0,path:"/countries",component:De}),Object(Y.jsx)(I.a,{exact:!0,path:"/capitals",component:Pt}),Object(Y.jsx)(I.a,{exact:!0,path:"/inspect-geojson",component:Mt})]}),Object(Y.jsx)(yt.NotificationContainer,{})]})};n(367),n(368);s.a.render(Object(Y.jsx)(o.a.StrictMode,{children:Object(Y.jsx)(pe.a,{children:Object(Y.jsx)(Dt,{})})}),document.getElementById("root"))},61:function(e,t,n){},90:function(e,t,n){},99:function(e,t,n){}},[[369,1,2]]]);
//# sourceMappingURL=main.19ef04fa.chunk.js.map