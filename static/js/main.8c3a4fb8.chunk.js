(this["webpackJsonpcountry-shapes"]=this["webpackJsonpcountry-shapes"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var c,a,r=n(0),o=n.n(r),i=n(29),s=n.n(i),l=n(5),u=n(7),d=n.n(u),j=n(8),b="https://Jozefpodlecki.github.io/geo-shapes",f=n(54),p=n.n(f),O=fetch("".concat(b,"/assets/geoObjects.json")).then((function(e){return e.json()})),v=(fetch("".concat(b,"/assets/neighbours.json")).then((function(e){return e.json()})),function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O;case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return e.search.toLowerCase().includes(t.phrase)})).slice(0,t.pageSize));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=function(e){return fetch("".concat(b,"/assets/regions/").concat(e,".json")).then((function(e){return e.json()}))},g=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageSize,c=t.phrase,e.next=3,O;case 3:return a=e.sent,r=a.filter((function(e){return"country"===e.type&&e.search.toLowerCase().includes(c)})),e.abrupt("return",r.slice(0,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O;case 2:return n=e.sent,c=n.filter((function(e){return"country"===e.type})),e.abrupt("return",c.find((function(e){return e.iso3166a2.includes(t)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return fetch("".concat(b,"/assets/shapes/").concat(e,"/first-level.svg")).then((function(e){return e.text()}))},_=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=5;break}return e.next=3,fetch("".concat(b,"/assets/geojson/countries.geojson")).then((function(e){return e.json()}));case 3:a=e.sent,c=new p.a(a);case 5:if(!(r=c.search(t,n))){e.next=8;break}return e.abrupt("return",r.properties.ISO_A3.toLowerCase());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,fetch("".concat(b,"/assets/geojson/continents.geojson")).then((function(e){return e.json()}));case 3:c=e.sent,a=new p.a(c);case 5:if(!(r=a.search(t,n))){e.next=8;break}return e.abrupt("return",r.properties.continent.toLowerCase());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O;case 2:return n=e.sent,c=n.filter((function(e){return"country"===e.type})),a=c.find((function(e){return e.iso3166a3===t})),e.abrupt("return",fetch("".concat(b,"/assets/geojson/").concat(null===a||void 0===a?void 0:a.iso3166a2,".geojson")).then((function(e){return e.json()})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(b,"/assets/geojson/").concat(t,".geojson")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return fetch("".concat(b,"/assets/geojson/").concat(e,".geojson")).then((function(e){return e.json()}))},S=n(368),C=n(373),E=n(369),L=n(370),M=n(371),T=n(372),D=n(16),H=n(41),A=n.n(H),P=(n(89),n(1)),I=function(e){var t=e.onMouseEnter,n=e.onMouseLeave,c=e.onMouseMove,a=e.svg,o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=o.current;if(e){var a=e.firstChild;if(a instanceof SVGElement){var r=a.querySelector("g").getBoundingClientRect();r.y,r.width,r.height;return a.addEventListener("mousemove",c),a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",n),function(){a.removeEventListener("mousemove",c),a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",n)}}}}),[t,n,c,o]),Object(P.jsx)("div",{className:"country-page__svg",ref:o,dangerouslySetInnerHTML:{__html:a}})},B=Object(r.memo)(I),z=n(6),Y=n(11),F=n(69),R=n(35),J=n.n(R),W=n(46),G=6378137,U=Math.PI/180,q=180/Math.PI;function Z(e){return e*U}function V(e){return e*q}function X(e,t,n,c){var a=Z(e[1]),r=Z(e[0]),o=t/n,i=Math.cos(o),s=Math.cos(a),l=Math.sin(o),u=Math.sin(a),d=Math.asin(u*i+s*l*Math.cos(c));return[V(r+Math.atan2(Math.sin(c)*l*s,i-u*Math.sin(d))),V(d)]}function K(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}function Q(e){return null===e||void 0===e}function $(e,t,n){for(var c=function(e){if(Q(e))return 64;if(K(e)){var t=e.numberOfEdges;return void 0===t?64:t}return 64}(n),a=function(e){if(Q(e))return G;if(K(e)){var t=e.earthRadius;return void 0===t?G:t}return G}(n),r=function(e){if(Q(e))return 0;if(K(e)){var t=e.bearing;return void 0===t?0:t}return 0}(n),o=function(e){return K(e)&&e.rightHandRule?-1:1}(n),i=Z(r),s=new Array,l=0;l<c;++l){var u=X(e,t,a,i+2*o*Math.PI*-l/c);s.push(u)}return s.push(s[0]),{type:"Polygon",coordinates:[s]}}var ee=function(){return"_"+Math.random().toString(36).substr(2,9)},te=function(e){var t=F.a.encode(e);return"data:text/plain;base64,".concat(t)},ne=function(e,t){var n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=e,n.download=t,n.click()},ce=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n=new FileReader;n.onload=function(){var t=n.result;e(t)},n.readAsText(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=/(-?\d*\.?\d+)[,\s]*(-?\d*\.?\d+)/,re=function(e){try{var t=JSON.parse(e);if(Array.isArray(t)){if(!t.length||"number"!==typeof t[0])return;return{type:"LineString",coordinates:[t]}}return t}catch(o){try{return Object(W.parse)(e)}catch(o){}}var n=ae.exec(e);if(n&&3===n.length){var c=Object(l.a)(n,3),a=c[1],r=c[2];return{type:"Point",coordinates:[Number(a),Number(r)]}}},oe=function(e){var t="";if(e)switch(e.type){case"Feature":t+="feature";var n=e;if("Polygon"===n.geometry.type){t+="_polygon";var c=n.geometry.coordinates;if(c.length&&c[0].length){var a=c[0].length;t+="_".concat(a)}}if("MultiPolygon"===n.geometry.type){t+="_multipolygon";var r=n.geometry.coordinates;if(r.length&&r[0].length){var o=r[0].length;t+="_".concat(o)}}break;case"Point":t+="_point";break;case"Polygon":t+="_polygon";break;case"MultiPolygon":t+="_multipolygon";break;case"LineString":t+="linestring";break;case"FeatureCollection":t+="features_".concat(e.features.length)}return t+=J()().format("_YYYYMMDDHHmmss")},ie=function(e){try{return localStorage.setItem("saved",JSON.stringify(e)),!0}catch(t){return!1}},se=n(19),le=(n(96),function(e){var t,n=e.flagUrl,c=e.fullName,a=Object(D.f)().pathname;return Object(P.jsxs)("div",{className:"breadcrumbs",children:[Object(P.jsx)(se.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"breadcrumbs__node",to:"/",children:"Home"}),"/explore"===a?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"breadcrumbs__separator",children:Object(P.jsx)(Y.a,{icon:z.a})}),Object(P.jsx)(se.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"breadcrumbs__node",to:"/explore",children:"Explore"})]}):null,a.includes("/country")||a.includes("/countries")?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"breadcrumbs__separator",children:Object(P.jsx)(Y.a,{icon:z.a})}),Object(P.jsx)(se.c,{exact:!0,activeClassName:"breadcrumbs__node--active",className:"breadcrumbs__node",to:"/countries",children:"Countries"})]}):null,n&&c?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"breadcrumbs__separator",children:Object(P.jsx)(Y.a,{icon:z.a})}),Object(P.jsxs)("div",{className:"countryNode",children:[Object(P.jsx)("div",{className:"countryNode__flag",style:(t=b+n,{background:"url(".concat(t,") center center / contain no-repeat")})}),Object(P.jsx)("div",{className:"countryNode__title",children:c})]})]}):null]})}),ue=Object(r.memo)(le),de=(n(99),function(e){var t=e.flagUrl,n=e.fullName,c=e.mapType,a=e.onMapChange,r=function(e){var t=e.currentTarget.dataset.mapoption;a(t)};return Object(P.jsxs)("div",{className:"country-page__navbar",children:[Object(P.jsx)(ue,{flagUrl:t,fullName:n}),Object(P.jsxs)("div",{className:"country-page__navbarMapSwitch",children:[Object(P.jsx)("div",{onClick:r,"data-mapoption":"leaflet",className:"country-page__navbarMapOption ".concat("leaflet"===c?"country-page__navbarMapOption--selected":null),children:"Leaflet"}),Object(P.jsx)("div",{onClick:r,"data-mapoption":"svg",className:"country-page__navbarMapOption ".concat("svg"===c?"country-page__navbarMapOption--selected":null),children:"Svg"})]})]})}),je=Object(r.memo)(de),be=n(3),fe=n(17),pe=(n(100),function(e){var t=e.x,n=e.y,c=e.show,a=e.children,r=Object(fe.useSpring)({opacity:c?1:0});return Object(P.jsx)(fe.animated.div,{className:"tooltip",style:Object(be.a)(Object(be.a)({},r),{},{top:"".concat(n-60,"px"),left:"".concat(t-90,"px"),display:r.opacity.to((function(e){return 0===e?"none":"block"}))}),children:a})}),Oe=(n(101),function(e){var t=e.hasEntered,n=e.region,c=e.x,a=e.y;return Object(P.jsx)(pe,{show:t&&!!n,x:c,y:a,children:n?Object(P.jsxs)("div",{className:"region",children:[Object(P.jsx)("div",{children:Object(P.jsx)("img",{alt:n.region,className:"region__image",src:b+n.flagUrl})}),Object(P.jsxs)("div",{className:"region__info",children:[Object(P.jsxs)("div",{children:["Region: ",n.region]}),Object(P.jsxs)("div",{children:["Capital: ",n.capital]})]})]}):null})}),ve=Object(r.memo)(Oe),me=(n(102),n(71)),ge=(n(103),function(e){return Object(me.a)(e),Object(P.jsxs)("div",{className:"country-page__info",children:[Object(P.jsx)("div",{children:Object(P.jsx)(Y.a,{size:"10x",icon:z.l})}),Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"country-page__infoTitle",children:"Page is under construction"}),Object(P.jsx)("div",{className:"country-page__infoDescription",children:"The data required for this page might not be prepared or an error occurred while loading it."})]})]})}),he=Object(r.memo)(ge),xe=function(){var e=Object(T.a)({click:function(t){var n=e.getCenter(),c=n.lat,a=n.lng;console.log([c,a],e.getZoom())}});return null},_e=function(){var e=Object(r.useState)({x:-1,y:-1}),t=Object(l.a)(e,2),n=t[0],c=n.x,a=n.y,o=t[1],i=Object(r.useState)({regions:[],isLoading:!0,hasError:!1}),s=Object(l.a)(i,2),u=s[0],b=s[1],f=Object(r.useState)(),p=Object(l.a)(f,2),O=p[0],v=p[1],g=Object(r.useState)(!1),_=Object(l.a)(g,2),y=_[0],N=_[1],w=Object(r.useState)("leaflet"),T=Object(l.a)(w,2),H=T[0],I=T[1],z=Object(r.useState)(),Y=Object(l.a)(z,2),F=Y[0],R=Y[1],J=Object(r.useState)(""),W=Object(l.a)(J,2),G=W[0],U=W[1],q=Object(D.g)().iso3166a2;Object(r.useEffect)((function(){q&&u.isLoading&&Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(q);case 3:return t=e.sent,e.next=6,m(q);case 6:if(n=e.sent,t){e.next=10;break}return b({hasError:!0,isLoading:!1}),e.abrupt("return");case 10:b({country:t,regions:n,isLoading:!1,hasError:!1}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),b({hasError:!0,isLoading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[u,q]);var Z=Object(r.useCallback)((function(e){if(!u.isLoading&&!u.hasError&&(o({x:e.clientX,y:e.clientY}),e.target instanceof SVGElement)){var t=e.target.id;if(t){var n=u.regions.find((function(e){return e.id===t}));n&&v(n)}else v(void 0)}}),[u]);return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"svg"!==H){e.next=8;break}return e.next=4,x(q);case 4:t=e.sent,U(t),e.next=12;break;case 8:return e.next=10,k(q);case 10:n=e.sent,R(n);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[q,H]),Object(P.jsx)("div",{className:"country-page ".concat(u.isLoading||u.hasError?"center":null),children:u.isLoading?Object(P.jsx)(A.a,{color:"white",size:15}):u.hasError?Object(P.jsx)(he,{}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(je,{flagUrl:u.country.flagUrl,fullName:u.country.fullName,mapType:H,onMapChange:I}),Object(P.jsx)(ve,{hasEntered:y,x:c,y:a,region:O}),Object(P.jsx)("div",{className:"country-page__map",children:"svg"===H?Object(P.jsx)(B,{onMouseEnter:function(){N(!0)},onMouseLeave:function(){N(!1)},onMouseMove:Z,svg:G}):Object(P.jsxs)(S.a,{zoom:u.country.zoom,center:u.country.countryCenter,scrollWheelZoom:!0,className:"country-page__leafletMap",children:[Object(P.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),F?Object(P.jsx)(E.a,{data:F}):null,u.country.capitalCenter?Object(P.jsx)(L.a,{position:u.country.capitalCenter,children:Object(P.jsx)(M.a,{children:u.country.capital})}):null,Object(P.jsx)(xe,{})]})}),Object(P.jsx)("div",{className:"country-page__footer"})]})})},ye=(n(107),function(e){var t=e.id,n=e.fullName,c=e.capital,a=e.iso3166a2,r=e.iso3166a3,o=e.flagUrl,i=e.neigboursCount,s=e.area,l=e.onClick,u=e.toggled;return Object(P.jsxs)("div",{"data-id":t,className:"country-item",onClick:l,children:[Object(P.jsxs)("div",{className:"country-item__row",children:[Object(P.jsx)("div",{className:"country-item__column",children:n}),Object(P.jsx)("div",{className:"country-item__column",children:c}),Object(P.jsx)("div",{className:"country-item__column",children:Object(P.jsx)("div",{className:"country-item__flag",style:{background:"url(".concat(b+o,") center center / cover")}})}),Object(P.jsx)("div",{className:"country-item__column",children:a}),Object(P.jsx)("div",{className:"country-item__column",children:r})]}),u?Object(P.jsxs)("div",{className:"country-item__details",children:[Object(P.jsxs)("div",{className:"country-item__field",children:["Neighbours: ",i]}),Object(P.jsxs)("div",{className:"country-item__field",children:["Area: ",s," km2"]}),Object(P.jsx)("div",{className:"country-item__bottom",children:Object(P.jsx)(se.b,{className:"country-item__link",to:"/country/".concat(a),children:Object(P.jsx)(Y.a,{icon:z.o})})})]}):null]})}),Ne=(n(108),function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({countries:[],isLoading:!0,hasError:!1}),o=Object(l.a)(a,2),i=o[0],s=o[1];Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({pageSize:25,phrase:n.toLowerCase()});case 3:t=e.sent,s({countries:t,isLoading:!1,hasError:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({countries:[],hasError:!0,isLoading:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[n]);var u=function(e){var t=e.currentTarget.dataset.id;s((function(e){return Object(be.a)(Object(be.a)({},e),{},{countries:e.countries.map((function(e){return Object(be.a)(Object(be.a)({},e),{},{toggled:e.id===t&&!e.toggled})}))})}))};return Object(P.jsxs)("div",{className:"countries-page",children:[Object(P.jsx)(ue,{}),Object(P.jsxs)("div",{className:"search",children:[Object(P.jsx)("div",{className:"search__icon",children:Object(P.jsx)(Y.a,{icon:z.r})}),Object(P.jsx)("input",{className:"search__input",value:n,onChange:function(e){var t=e.currentTarget.value;c(t)},placeholder:"Search...",type:"text"})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"countries-page__headers",children:[Object(P.jsx)("div",{className:"countries-page__header",children:"Full Name"}),Object(P.jsx)("div",{className:"countries-page__header",children:"Capital"}),Object(P.jsx)("div",{className:"countries-page__header",children:"Flag"}),Object(P.jsx)("div",{className:"countries-page__header",children:"ISO 3166-2"}),Object(P.jsx)("div",{className:"countries-page__header",children:"ISO 3166-3"})]}),i.countries.map((function(e){return Object(P.jsx)(ye,Object(be.a)({toggled:e.toggled||!1,onClick:u},e),e.id)}))]})]})}),we=(n(109),function(e){var t=e.onSearch;return Object(P.jsxs)("div",{className:"toolbar",children:[Object(P.jsxs)(se.b,{className:"toolbar__logo",to:"/",children:[Object(P.jsx)("div",{className:"toolbar__logoText",children:"Geo-shapes"}),Object(P.jsx)("div",{className:"toolbar__logoIcon",children:Object(P.jsx)(Y.a,{icon:z.k})})]}),Object(P.jsxs)("div",{className:"toolbar__menu",children:[Object(P.jsx)(se.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/",children:Object(P.jsx)(Y.a,{icon:z.m})}),Object(P.jsx)(se.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/explore",children:Object(P.jsx)(Y.a,{icon:z.i})}),Object(P.jsx)(se.c,{activeClassName:"toolbar__iconButton--selected",className:"toolbar__iconButton",exact:!0,to:"/draw",children:Object(P.jsx)(Y.a,{icon:z.q})}),Object(P.jsx)("div",{className:"toolbar__iconButton",onClick:t,children:Object(P.jsx)(Y.a,{icon:z.r})})]})]})}),ke=Object(r.memo)(we),Se=n(72),Ce=n.n(Se),Ee=(n(110),function(e){var t=e.capital,n=e.iso3166a2,c=e.flagUrl,a=e.fullName,o=e.id,i=e.thumbnailUrl,s=(e.type,e.onClick),u=Object(r.useState)(b+i),d=Object(l.a)(u,2),j=d[0],f=d[1];return Object(r.useEffect)((function(){if(j){var e=new Image;e.onerror=function(){return f(void 0)},e.src=j}}),[j]),Object(P.jsxs)("div",{className:"geoObject",children:[Object(P.jsx)("div",{className:"geoObject__imageWrapper",children:Object(P.jsx)("div",{className:"geoObject__image",style:{background:j?"url(".concat(j,") center center / cover"):"gray"}})}),Object(P.jsxs)(se.b,{className:"geoObject__link",onClick:s,to:"/country/".concat(n),children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"geoObject__name",children:a}),Object(P.jsx)("div",{className:"geoObject__type",children:t})]}),Object(P.jsx)("div",{className:"geoObject__flag",style:{background:"url(".concat(b+c,") center center / cover")}})]})]},o)}),Le=Object(r.memo)(Ee),Me=(n(111),function(e){var t=e.value,n=e.onChange,c=e.onClear,a=Object(r.useCallback)((function(e){var t=e.currentTarget.value;n(t)}),[n]);return Object(P.jsxs)("div",{className:"searchbox ".concat(t?"searchbox--typed":""),children:[Object(P.jsx)("div",{className:"searchbox__icon ".concat(t?"searchbox__icon--active":""),children:Object(P.jsx)(Y.a,{icon:z.r})}),Object(P.jsx)("input",{type:"text",value:t,onChange:a,className:"searchbox__input",placeholder:"I am looking for..."}),t?Object(P.jsx)("div",{onClick:c,className:"searchbox__clearIcon",children:Object(P.jsx)(Y.a,{icon:z.s})}):null]})}),Te=n(22),De=(n(112),["className","onClick","icon","disabled"]),He=function(e){var t=e.className,n=e.onClick,c=e.icon,a=e.disabled,r=void 0!==a&&a,o=Object(Te.a)(e,De);return Object(P.jsx)("div",Object(be.a)(Object(be.a)({},o),{},{onClick:n,className:"icon ".concat(r?"icon--disabled":""," ").concat(n?"icon--interactive":""," ").concat(t),children:Object(P.jsx)(Y.a,{icon:c})}))},Ae=Object(r.memo)(He),Pe=(n(113),function(e){var t=e.isShowing,n=e.onHide,c=e.onClick,a=Object(r.useState)({isLoading:!0,items:[]}),o=Object(l.a)(a,2),i=o[0],s=i.isLoading,u=i.items,b=o[1],f=Object(r.useState)(""),p=Object(l.a)(f,2),O=p[0],m=p[1],g=Ce()(O,1e3),h=Object(l.a)(g,1)[0],x=Object(fe.useSpring)({opacity:t?1:0}),_=Object(r.useCallback)((function(){m("")}),[]);return Object(r.useEffect)((function(){b({isLoading:!0,items:[]})}),[O]),Object(r.useEffect)((function(){t?Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({pageSize:10,phrase:h});case 2:t=e.sent,b({isLoading:!1,items:t});case 4:case"end":return e.stop()}}),e)})))():(b({isLoading:!0,items:[]}),m(""))}),[t,h]),Object(P.jsxs)(fe.animated.div,{style:Object(be.a)(Object(be.a)({},x),{},{display:x.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"searchDialog ".concat(""),children:[Object(P.jsx)("div",{className:"searchDialog__navbar",children:Object(P.jsx)(Ae,{onClick:n,className:"searchDialog__close",icon:z.s})}),Object(P.jsxs)("div",{className:"searchDialog__body",children:[Object(P.jsx)("div",{className:"searchDialog__top",children:Object(P.jsx)(Me,{onChange:m,onClear:_,value:O})}),Object(P.jsx)("div",{className:"searchDialog__list ".concat(s?"searchDialog__list--center":""),children:s?Object(P.jsx)(A.a,{color:"white",size:15}):u.map((function(e){return"country"===e.type&&Object(P.jsx)(Le,Object(be.a)({onClick:c},e),e.id)}))})]})]})}),Ie=n(10),Be=n(374),ze={type:"Polygon",coordinates:[[]]},Ye=function(e){var t=e.drawOption,n=e.geoObjects,c=e.onChange,a=Object(r.useState)(!1),o=Object(l.a)(a,2),i=o[0],s=o[1],u=Object(r.useState)({lat:50,lng:-1}),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),O=p[0],v=p[1],m=Object(r.useState)(!1),g=Object(l.a)(m,2),h=g[0],x=g[1],_=Object(r.useState)(10),y=Object(l.a)(_,2),N=y[0],w=y[1],k=Object(r.useState)(ze),S=Object(l.a)(k,2),C=S[0],L=S[1],M=Object(T.a)({click:function(e){if(O||"circle"!==t||(M.dragging.disable(),v(!0),b(e.latlng),w(100)),!h&&O&&"circle"===t&&(M.dragging.enable(),x(!0)),"polygon"===t){var n=e.latlng,c=n.lat,a=[n.lng,c];L((function(e){var t=[].concat(Object(Ie.a)(e.coordinates[0]),[a]);return Object(be.a)(Object(be.a)({},e),{},{coordinates:[t]})}))}if("lineString"===t){var r=e.latlng,o=r.lat,i=[r.lng,o];L((function(e){var t=[].concat(Object(Ie.a)(e.coordinates),[i]);return Object(be.a)(Object(be.a)({},e),{},{coordinates:t})}))}},mouseup:function(e){},mousemove:function(e){if(O&&!h&&"circle"===t){var n=e.latlng.distanceTo(j);w(n)}}});Object(r.useEffect)((function(){if(h&&"lineString"===t&&(c({id:ee(),selected:!1,data:C}),L(ze),x(!1)),h&&"polygon"===t&&(c({id:ee(),selected:!1,data:C}),L(ze),x(!1)),h&&"circle"===t){var e=$([j.lng,j.lat],N);v(!1),x(!1),c({id:ee(),selected:!1,data:e})}}),[C,c,N,j,t,h]),Object(r.useEffect)((function(){"none"!==t&&("polygon"===t&&"Polygon"===C.type||"circle"===t&&"Polygon"===C.type||"lineString"===t&&"LineString"===C.type||L((function(e){var n="LineString",c=[];return"lineString"===t&&(n="LineString",c=[]),"circle"===t&&(n="Polygon",c=[[]]),"polygon"===t&&(n="Polygon",c=[[]]),{type:n,coordinates:c}})))}),[C,t]);var D=function(e){"Enter"===e.key&&x(!0)};return Object(r.useEffect)((function(){return window.addEventListener("keydown",D),function(){window.removeEventListener("keydown",D)}}),[]),Object(P.jsxs)(P.Fragment,{children:[h||"circle"!==t?null:Object(P.jsx)("div",{className:"draw-page__popup",children:"To draw a circle, click on the map, move mouse to set radius and click to finish"}),h||"lineString"!==t?null:Object(P.jsx)("div",{className:"draw-page__popup",children:"To draw a line string, click on the map and press enter to finish"}),h||"polygon"!==t?null:Object(P.jsx)("div",{className:"draw-page__popup",children:"To draw a polygon, click on the map and press enter to finish"}),n.map((function(e){return Object(P.jsx)(E.a,{data:e.data,style:{color:e.selected?"blue":"gray"}},e.id)})),Object(P.jsx)(E.a,{data:C},Math.random()),O?Object(P.jsx)(Be.a,{eventHandlers:{mousemove:function(e){i&&b(e.latlng)},mousedown:function(e){s(!0),M.dragging.disable()},mouseup:function(e){s(!1),M.dragging.enable()}},center:j,radius:N}):null]})},Fe=n(49),Re=n.n(Fe),Je=n(50),We=n.n(Je),Ge=(n(327),function(e){var t=e.id,n=e.isShowing,c=e.onHide,a=e.onExport,o=e.data,i=e.exportType,s=Object(r.useRef)(null),l=Object(fe.useSpring)({opacity:n?1:0}),u="geojson"===i?Re()(o):o;return Object(r.useEffect)((function(){var e=s.current;if(e){var t=function(t){var n=t.target;e.contains(n)||c()};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[s,c,n]),Object(P.jsx)(fe.animated.div,{ref:s,style:Object(be.a)(Object(be.a)({},l),{},{display:l.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"preview-dialog__overlay",children:Object(P.jsxs)("div",{className:"preview-dialog",children:[Object(P.jsxs)("div",{className:"preview-dialog__topBar",children:[Object(P.jsxs)("div",{className:"preview-dialog__right",children:[Object(P.jsx)(Ae,{onClick:function(){navigator.clipboard.writeText(u)},className:"",icon:z.c}),Object(P.jsx)(Ae,{onClick:function(){return a(t)},className:"",icon:z.f})]}),Object(P.jsx)(Ae,{onClick:c,className:"preview-dialog__close",icon:z.s})]}),Object(P.jsx)("div",{className:"preview-dialog__body",children:o?Object(P.jsx)(We.a,{className:"geojson"===i?"json":"none",children:u}):null})]})})}),Ue=(n(328),n(329),["checked","onChange","label"]),qe=function(e){var t=e.checked,n=e.onChange,c=e.label,a=Object(Te.a)(e,Ue);return Object(P.jsx)("div",{className:"checkbox",children:Object(P.jsxs)("label",{className:"checkbox__label ".concat(t?"checkbox__label--selected":""),children:[Object(P.jsx)("input",Object(be.a)(Object(be.a)({},a),{},{className:"checkbox__input",type:"checkbox",onChange:n,checked:t})),c]})})},Ze=Object(r.memo)(qe),Ve=function(e){var t=e.drawOption,n=e.exportType,c=e.data,a=e.geoObjects,r=e.onChange,o=e.onExport,i=e.onPreview,s=e.onHide,l=e.onRemoveShapes,u=e.onItemClick,d=e.onAllItemsSelect,j=e.selectedCount,b=e.isPreviewShowing,f=!e.dataAvailable,p=function(e){var t=e.currentTarget.dataset.id;r({drawOption:t,exportType:n})},O=function(e){var n=e.currentTarget.dataset.id;r({drawOption:t,exportType:n})},v=function(e){var t=e.currentTarget.dataset.id;u(t)},m=function(e){var t=e.currentTarget.dataset.id;u(t)};return Object(P.jsxs)("div",{className:"draw-page__panel",children:[Object(P.jsxs)("div",{className:"draw-page__topBar",children:["Remove shapes ",Object(P.jsx)(Ae,{disabled:f,onClick:l,className:"",icon:z.t})]}),Object(P.jsxs)("div",{className:"draw-page__toolbox",children:[Object(P.jsx)(Ae,{"data-id":"polygon",onClick:p,className:"draw-page__tool ".concat("polygon"===t?"selected":""),icon:z.g}),Object(P.jsx)(Ae,{"data-id":"lineString",onClick:p,className:"draw-page__tool ".concat("lineString"===t?"selected":""),icon:z.q}),Object(P.jsx)(Ae,{"data-id":"circle",onClick:p,className:"draw-page__tool ".concat("circle"===t?"selected":""),icon:z.b})]}),Object(P.jsxs)("div",{className:"items-section",children:[Object(P.jsxs)("div",{className:"items-section__header",children:[Object(P.jsx)("div",{children:Object(P.jsx)(Ze,{onChange:d,checked:!(!a.length||j!==a.length)})}),Object(P.jsx)("div",{className:"items-section__title",children:"Items"})]}),a.map((function(e){return Object(P.jsxs)("div",{className:"items-section__item","data-id":e.id,onClick:v,children:[Object(P.jsx)("div",{children:Object(P.jsx)(Ze,{"data-id":e.id,onChange:m,checked:e.selected})}),Object(P.jsx)("div",{children:e.id})]},e.id)}))]}),Object(P.jsxs)("div",{className:"export-section",children:[Object(P.jsx)("div",{className:"export-section__title",children:"Export"}),Object(P.jsxs)("div",{className:"export",children:[Object(P.jsx)("div",{"data-id":"geojson",onClick:O,className:"export__option ".concat("geojson"===n?"export__option--selected":""),children:"Geojson"}),Object(P.jsx)("div",{"data-id":"wkt",onClick:O,className:"export__option ".concat("wkt"===n?"export__option--selected":""),children:"WKT"})]}),Object(P.jsx)(Ge,{id:null===c||void 0===c?void 0:c.id,data:c,onExport:o,onHide:s,isShowing:b,exportType:n}),Object(P.jsxs)("div",{className:"payload",children:[Object(P.jsx)(Ae,{disabled:f,onClick:i,className:"payload__option",icon:z.i}),Object(P.jsx)(Ae,{disabled:f,onClick:function(){navigator.clipboard.writeText(JSON.stringify(c))},className:"payload__option",icon:z.c}),Object(P.jsx)(Ae,{disabled:f,onClick:o,className:"payload__option",icon:z.f})]})]})]})},Xe=Object(r.memo)(Ve),Ke=(n(330),function(){var e=Object(r.useState)({geoObjects:[],selectedCount:0}),t=Object(l.a)(e,2),n=t[0],c=n.geoObjects,a=n.selectedCount,o=t[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),u=s[0],d=s[1],j=Object(r.useState)("none"),b=Object(l.a)(j,2),f=b[0],p=b[1],O=Object(r.useState)("geojson"),v=Object(l.a)(O,2),m=v[0],g=v[1],h=Object(r.useState)(),x=Object(l.a)(h,2),_=x[0],y=x[1];return Object(P.jsxs)("div",{className:"draw-page",children:[Object(P.jsx)(Xe,{geoObjects:c,drawOption:f,exportType:m,onChange:function(e){p(e.drawOption),g(e.exportType),y("")},onExport:function(){var e=te(JSON.stringify(_));ne(e,"geojson"===m?"data.geojson":"wkt.txt")},onPreview:function(){var e;if(e=1===c.length?c[0].data:{type:"GeometryCollection",geometries:Object(Ie.a)(c.map((function(e){return e.data})))},"wkt"===m){var t=Object(W.stringify)(e);return t=t.replace(/,/g,",\n"),y(t),void d(!0)}y(e),d(!0)},onHide:function(){return d(!1)},onRemoveShapes:function(){return o({geoObjects:[],selectedCount:0})},onItemClick:function(e){o((function(t){var n=Object(Ie.a)(t.geoObjects.map((function(e){return Object(be.a)({},e)}))),c=n.find((function(t){return t.id===e}));c.selected=!c.selected;var a=t.selectedCount;return{geoObjects:n,selectedCount:a=c.selected?a+1:a-1}}))},onAllItemsSelect:function(){o((function(e){var t=!!e.geoObjects.some((function(e){return!1===e.selected})),n=Object(Ie.a)(e.geoObjects.map((function(e){return Object(be.a)(Object(be.a)({},e),{},{selected:t})})));return{geoObjects:n,selectedCount:t?n.length:0}}))},data:_,selectedCount:a,dataAvailable:!!c.length,isPreviewShowing:u}),Object(P.jsxs)(S.a,{zoom:4,center:[51.505,-.09],scrollWheelZoom:!0,className:"draw-page__map",children:[Object(P.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(P.jsx)(Ye,{onChange:function(e){o((function(t){return Object(be.a)(Object(be.a)({},t),{},{geoObjects:[].concat(Object(Ie.a)(t.geoObjects),[e])})})),p("none")},geoObjects:c,drawOption:f})]})]})}),Qe=n(36),$e=n(77),et=n(74),tt=n(21),nt=(n(331),function(e){var t=e.id,n=e.isSelected,c=e.loadedAt,a=e.name,r=e.featuresCount,o=e.warning,i=e.invalid,s=e.onDelete,l=e.onShowOnMap,u=e.onShowGeojson,d=e.onShowWarning,j=e.onExport,b=e.onToggle,f=function(){return d(t)};return Object(P.jsxs)("div",{className:"uploaded-item ".concat(n?"selected":""),children:[Object(P.jsxs)("div",{className:"uploaded-item__topBar",children:[Object(P.jsxs)("div",{"data-id":t,onClick:b,children:[Object(P.jsx)("div",{className:"uploaded-item__title",children:a}),Object(P.jsxs)("div",{className:"uploaded-item__detail",children:["Loaded at: ",new Date(c).toLocaleString()]})]}),Object(P.jsx)(Ae,{"data-id":t,className:"uploaded-item__delete",onClick:s,icon:z.s})]}),i?Object(P.jsx)("div",{className:"uploaded-item__body",children:o?Object(P.jsx)(Ae,{className:"popup__iconButton",onClick:f,icon:z.h}):null}):Object(P.jsxs)("div",{className:"uploaded-item__body",children:[Object(P.jsx)(Ae,{className:"popup__iconButton",onClick:function(){return l(t)},icon:z.e}),r?Object(P.jsxs)("div",{className:"uploaded-item__detail",children:["Features: ",r]}):null,Object(P.jsx)(Ae,{className:"popup__iconButton",onClick:function(){return j(t)},icon:z.f}),Object(P.jsx)(Ae,{className:"popup__iconButton",onClick:function(){return u(t)},icon:z.d}),o?Object(P.jsx)(Ae,{className:"popup__iconButton",onClick:f,icon:z.h}):null]})]})}),ct=(n(332),function(e){var t=e.isShowing,n=Object(fe.useSpring)({opacity:t?1:0});return Object(P.jsx)(fe.animated.div,{style:Object(be.a)(Object(be.a)({},n),{},{display:n.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"explore-page__dropOverlay",children:Object(P.jsxs)("div",{className:"explore-page__dropModal",children:[Object(P.jsx)("div",{children:Object(P.jsx)(Y.a,{size:"5x",icon:z.j})}),Object(P.jsx)("div",{className:"explore-page__dropModalText",children:"Drop geojson/json array lat lng or lat lng"})]})})}),at=Object(r.memo)(ct),rt=function(e){var t=e.id,n=e.data,c=e.eventHandlers,a=e.isSelected,o=Object(r.useMemo)((function(){return{color:a?"blue":"gray"}}),[a]),i=Object(r.useCallback)((function(e){e.id=t}),[t]);return Object(P.jsx)(E.a,{data:n,"data-id":t,style:o,eventHandlers:c,onEachFeature:i})},ot=Object(r.memo)(rt),it=(n(333),function(e){var t,n=e.x,c=e.y,a=e.isShowing,o=e.onAction,i=e.onHide,s=Object(r.useRef)(null),l=Object(fe.useSpring)({opacity:a?1:0});Object(r.useEffect)((function(){var e=s.current;if(e){var t=function(t){var n=t.target;e.contains(n)||i()};return a&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[s,i,a]);var u=function(e){var t=e.currentTarget.dataset.action;o(t)},d=((null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.getBoundingClientRect())||{height:0}).height;return Object(P.jsx)(fe.animated.div,{ref:s,style:Object(be.a)(Object(be.a)({},l),{},{top:"".concat(c-d/2,"px"),left:"".concat(n,"px"),display:l.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"menu__overlay",children:Object(P.jsxs)("div",{className:"menu",children:[Object(P.jsx)("div",{className:"menu__item",onClick:u,"data-action":"nearby-country",children:"Get nearby country"}),Object(P.jsx)("div",{className:"menu__item",onClick:u,"data-action":"nearby-continent",children:"Get nearby continent"})]})})}),st=function(e){var t=e.onAction,n=e.geojsonObjects,c=e.center,a=e.bounds,o=Object(r.useState)({x:0,y:0,latlng:{lat:-1,lng:-1},isShowing:!1}),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(T.a)({click:function(e){var t=e.propagatedFrom;if(t&&t.feature)e.propagatedFrom.feature.id},contextmenu:function(e){var t=e.originalEvent;t.preventDefault();var n=t.clientX,c=t.clientY,a=e.latlng;u({x:n,y:c,latlng:a,isShowing:!0})}});Object(r.useEffect)((function(){d.setView(c)}),[d,c]),Object(r.useEffect)((function(){a&&d.fitBounds(a)}),[d,a]);var j=Object(r.useMemo)((function(){return{click:function(e){var t=e.sourceTarget;if("feature"in t)t.feature.id}}}),[]),b=function(){return u((function(e){return Object(be.a)(Object(be.a)({},e),{},{isShowing:!1})}))};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(it,Object(be.a)(Object(be.a)({},s),{},{onAction:function(e){t(e,s.latlng),b()},onHide:b})),n.filter((function(e){return!e.invalid})).map((function(e){return Object(P.jsx)(ot,Object(be.a)(Object(be.a)({},e),{},{eventHandlers:j,data:e.data}),e.id)}))]})},lt=Object(r.memo)(st),ut=(n(334),function(e){var t=e.id,n=e.isShowing,c=e.onHide,a=e.onExport,o=e.data,i=Object(r.useRef)(null),s=Object(fe.useSpring)({opacity:n?1:0});Object(r.useEffect)((function(){var e=i.current;if(e){var t=function(t){var n=t.target;e.contains(n)||c()};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}}),[i,c,n]);var l=n?Re()(o):"";return Object(P.jsx)(fe.animated.div,{ref:i,style:Object(be.a)(Object(be.a)({},s),{},{display:s.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"preview-dialog__overlay",children:Object(P.jsxs)("div",{className:"preview-dialog",children:[Object(P.jsxs)("div",{className:"preview-dialog__topBar",children:[Object(P.jsxs)("div",{className:"preview-dialog__right",children:[Object(P.jsx)(Ae,{onClick:function(){},className:"",icon:z.c}),Object(P.jsx)(Ae,{onClick:function(){return a(t)},className:"",icon:z.f})]}),Object(P.jsx)(Ae,{onClick:c,className:"preview-dialog__close",icon:z.s})]}),Object(P.jsx)("div",{className:"preview-dialog__body",children:l?Object(P.jsx)(We.a,{className:"json",children:l}):null})]})})}),dt=Object(r.memo)(ut),jt=(n(335),function(e){var t=e.isShowing,n=e.onHide,c=e.warning,a=Object(r.useRef)(null),o=Object(fe.useSpring)({opacity:t?1:0});return Object(r.useEffect)((function(){var e=a.current;if(e){var c=function(t){var c=t.target;e===c&&n()};return t&&window.addEventListener("click",c),function(){window.removeEventListener("click",c)}}}),[a,n,t]),Object(P.jsx)(fe.animated.div,{ref:a,style:Object(be.a)(Object(be.a)({},o),{},{display:o.opacity.to((function(e){return 0===e?"none":"flex"}))}),className:"warning-dialog__overlay",children:Object(P.jsxs)("div",{className:"warning-dialog",children:[Object(P.jsx)(Ae,{onClick:n,className:"warning-dialog__closeIcon",icon:z.s}),Object(P.jsxs)("div",{className:"warning-dialog__body",children:[Object(P.jsx)(Ae,{className:"warning-dialog__warningIcon",icon:z.h}),Object(P.jsx)("div",{className:"warning-dialog__text",children:c})]})]})})}),bt=Object(r.memo)(jt),ft=(n(336),function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),o=Object(l.a)(a,2),i=o[0],s=o[1],u=Object(r.useState)({id:"",warning:"",data:{type:"Point"}}),b=Object(l.a)(u,2),f=b[0],p=f.id,O=f.warning,v=f.data,m=b[1],g=Object(r.useState)(!1),h=Object(l.a)(g,2),x=h[0],k=h[1],E=Object(r.useState)(""),L=Object(l.a)(E,2),M=L[0],T=L[1],D=Object(r.useState)(),H=Object(l.a)(D,2),A=H[0],I=H[1],B=Object(r.useState)(),Y=Object(l.a)(B,2),F=Y[0],R=Y[1],W=Object(r.useState)([51.505,-.09]),G=Object(l.a)(W,2),U=G[0],q=(G[1],Object(r.useCallback)((function(e){e.length&&(s(!0),Object(j.a)(d.a.mark((function t(){var a,r,o,i,l,u,j;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new Array,r=Object(Qe.a)(e),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=16;break}return i=o.value,t.next=8,ce(i);case 8:l=t.sent,u=re(l),0,j={id:ee(),name:i.name,fileName:i.name,loadedAt:new Date,isSelected:!1,featuresCount:0,data:u,invalid:!u},a.push(j),ie(a)||(j.warning="We could not save geo-object to local storage. The file size is too big.");case 14:t.next=4;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:a=a.concat(n),c(a),s(!1);case 27:case"end":return t.stop()}}),t,null,[[2,18,21,24]])})))())}),[n])),Z=Object($e.a)({onDrop:q}),V=Z.getRootProps,X=Z.isDragActive;Object(r.useEffect)((function(){var e=localStorage.getItem("saved");e&&new Promise((function(){var t=JSON.parse(e);c(t),s(!1)}))}),[]),Object(r.useEffect)((function(){var e=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.readText();case 3:n=t.sent,T(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:setTimeout(e,2e3);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();setTimeout(e,2e3)}),[]);var K=function(e){var t,n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(n){var a=re(n);if(a){var r=oe(a),o={id:ee(),name:r,loadedAt:new Date,isSelected:!1,featuresCount:0,data:a,invalid:!a};c((function(e){return[].concat(Object(Ie.a)(e),[o])}))}}};Object(r.useEffect)((function(){return window.addEventListener("paste",K),function(){window.removeEventListener("paste",K)}}),[]);var Q=function(e){var t=e.currentTarget.dataset.id;c((function(e){var n=Object(Ie.a)(e);if(!n.some((function(e){return e.id===t})))return e;var c,a=Object(Qe.a)(n);try{for(a.s();!(c=a.n()).done;){var r=c.value;r.isSelected&&(r.isSelected=!r.isSelected),r.id===t&&(r.isSelected=!r.isSelected)}}catch(o){a.e(o)}finally{a.f()}return n}))},$=function(e){var t=e.currentTarget.dataset.id;c((function(e){var n=e.filter((function(e){return e.id!==t&&!e.warning}));return localStorage.setItem("saved",JSON.stringify(n)),n}))},ae=function(e){var t=n.find((function(t){return t.id===e}));if(!t.invalid){var c=Object(tt.geoJSON)(t.data).getBounds();I(c)}},se=function(e){var t=n.find((function(t){return t.id===e}));R("show-warning"),m((function(e){return Object(be.a)(Object(be.a)({},e),{},{warning:t.warning})}))},le=Object(r.useCallback)((function(){return R(void 0)}),[]),de=function(e){var t=n.find((function(t){return t.id===e}));t.invalid||(R("show-preview"),m((function(e){return Object(be.a)(Object(be.a)({},e),{},{id:t.id,data:t.data})})))},je=function(e){var t=n.find((function(t){return t.id===e})),c=te(JSON.stringify(null===t||void 0===t?void 0:t.data)),a=t.fileName?t.fileName:"".concat(t.name,".geojson");ne(c,a)},fe=Object(r.useCallback)((function(e,t){var n=t.lat,a=t.lng;s(!0),"nearby-continent"==e&&Object(j.a)(d.a.mark((function e(){var t,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(a,n);case 3:if(t=e.sent){e.next=7;break}return s(!1),e.abrupt("return");case 7:return e.next=9,w(t);case 9:if(r=e.sent){e.next=13;break}return s(!1),e.abrupt("return");case 13:o=J()().format("_YYYYMMDDHHmmss"),c((function(e){return[].concat(Object(Ie.a)(e),[{id:ee(),data:r,name:"".concat(t).concat(o),area:0,featuresCount:0,invalid:!1,isSelected:!1,loadedAt:new Date,points:0}])})),s(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),s(!0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))(),"nearby-country"===e&&Object(j.a)(d.a.mark((function e(){var t,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(a,n);case 3:if(t=e.sent){e.next=7;break}return s(!1),e.abrupt("return");case 7:return e.next=9,N(t);case 9:if(r=e.sent,o=J()().format("_YYYYMMDDHHmmss"),r){e.next=14;break}return s(!1),e.abrupt("return");case 14:c((function(e){var n=[].concat(Object(Ie.a)(e),[{id:ee(),data:r,name:"".concat(t).concat(o),area:0,featuresCount:0,invalid:!1,isSelected:!1,loadedAt:new Date,points:0}]);return localStorage.setItem("saved",JSON.stringify(n)),n})),setTimeout((function(){s(!1)}),1e3),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),s(!1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))(),le()}),[le]),pe=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,r,o,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),k(!0),e.next=4,new Promise((function(e,t){var n=document.createElement("input");n.type="file";var c=!1;window.addEventListener("focus",(function t(){window.removeEventListener("focus",t),setTimeout((function(){c||e(null),n.remove()}),100)})),n.onchange=function(t){if(t.target instanceof HTMLInputElement){c=!0;var n=Array.from(t.target.files),a=Object(l.a)(n,1)[0];e(a)}},n.click()}));case 4:if(t=e.sent){e.next=8;break}return s(!1),e.abrupt("return");case 8:return e.next=10,ce(t);case 10:if(a=e.sent,r=re(a)){e.next=15;break}return s(!1),e.abrupt("return");case 15:o=oe(r),i={id:ee(),name:o,data:r,invalid:!r,area:0,featuresCount:0,isSelected:!1,loadedAt:new Date,points:0},u=[].concat(Object(Ie.a)(n),[i]),ie(u)||(i.warning="We could not save geo-object to local storage. The file size is too big."),c(u),s(!1);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("rerender explore page");return Object(P.jsxs)("div",Object(be.a)(Object(be.a)({className:"explore-page"},V()),{},{children:[Object(P.jsx)(at,{isShowing:X}),Object(P.jsx)(dt,{id:p,onHide:le,onExport:je,isShowing:"show-preview"===F,data:v}),Object(P.jsx)(bt,{isShowing:"show-warning"===F,warning:O,onHide:le}),Object(P.jsxs)("div",{className:"explore-page__navbar",children:[Object(P.jsx)(ue,{}),Object(P.jsx)(Ae,{className:"navbar__upload",onClick:pe,icon:z.u}),Object(P.jsx)(Ae,{disabled:!M,className:"navbar__clipboard",onClick:function(){k(!0),s(!0);var e=re(M),t="clipboard";e&&(t+="_".concat(oe(e))),t+=J()().format("_YYYYMMDDHHmmss");var a={id:ee(),name:t,loadedAt:new Date,isSelected:!1,featuresCount:0,data:e,invalid:!e},r=[].concat(Object(Ie.a)(n),[a]);ie(r)||(a.warning="We could not save geo-object to local storage. The file size is too big."),c(r),s(!1)},icon:z.c}),Object(P.jsx)(Ae,{className:"navbar__toggle",onClick:function(){return k((function(e){return!e}))},icon:z.n})]}),Object(P.jsxs)("div",{className:"explore-page__content",children:[Object(P.jsxs)(S.a,{zoom:4,center:U,scrollWheelZoom:!0,className:"explore-page__map",children:[Object(P.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(P.jsx)(lt,{onAction:fe,geojsonObjects:n,center:U,bounds:A})]}),x?Object(P.jsxs)("div",{className:"explore-page__panel",children:[Object(P.jsx)("div",{className:"explore-page__loader",children:Object(P.jsx)(et.BarLoader,{speedMultiplier:.5,color:i?"white":"transparent",width:"100%"})}),Object(P.jsx)("div",{className:"explore-page__toolbar"}),Object(P.jsx)("div",{className:"explore-page__list",children:n.map((function(e){return Object(P.jsx)(nt,Object(be.a)({onDelete:$,onExport:je,onToggle:Q,onShowWarning:se,onShowOnMap:ae,onShowGeojson:de},e),e.id)}))})]}):null]})]}))}),pt=n(75),Ot=(n(362),n(76)),vt=(n(363),[{icon:z.n,text:"List of countries",link:"/countries"},{icon:z.n,text:"List of capitals",link:"/capitals"},{icon:z.p,text:"Draw shapes",link:"/draw"},{icon:Ot.a,text:"Explore map",link:"/explore"}]),mt=function(){var e="".concat(b,"/assets/background.jpg");return Object(P.jsxs)("div",{className:"home",children:[Object(P.jsx)("div",{className:"background",style:{background:"url(".concat(e,") center center / cover")}}),Object(P.jsx)("div",{className:"header",children:"Explore"}),Object(P.jsx)("div",{className:"list",children:vt.map((function(e){return Object(P.jsxs)(se.b,{to:e.link,className:"link",children:[Object(P.jsx)("div",{children:Object(P.jsx)(Y.a,{size:"2x",icon:e.icon})}),Object(P.jsx)("div",{className:"link__text",children:e.text})]},e.link)}))})]})},gt=Object(r.memo)(mt),ht=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=function(){return c(!1)};return Object(P.jsxs)("div",{className:"app",children:[Object(P.jsx)(ke,{onSearch:function(){return c(!0)}}),Object(P.jsx)(Pe,{onHide:a,onClick:a,isShowing:n}),Object(P.jsxs)(D.c,{children:[Object(P.jsx)(D.a,{exact:!0,path:"/",component:gt}),Object(P.jsx)(D.a,{exact:!0,path:"/explore",component:ft}),Object(P.jsx)(D.a,{exact:!0,path:"/draw",component:Ke}),Object(P.jsx)(D.a,{exact:!0,path:"/country/:iso3166a2",component:_e}),Object(P.jsx)(D.a,{exact:!0,path:"/countries",component:Ne})]}),Object(P.jsx)(pt.NotificationContainer,{})]})};n(364),n(365);s.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(se.a,{children:Object(P.jsx)(ht,{})})}),document.getElementById("root"))},89:function(e,t,n){},96:function(e,t,n){},99:function(e,t,n){}},[[366,1,2]]]);
//# sourceMappingURL=main.8c3a4fb8.chunk.js.map